<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Springboot框架 | Jilfoyle</title><meta name="keywords" content="框架,Springboot"><meta name="author" content="Jilfoyle"><meta name="copyright" content="Jilfoyle"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="- 微服务阶段javase：OOP mysql：持久化 html+css+js+jquery+框架 javaweb：独立开发MVC三层架构的网站 SSM：框架;简化我们的开发流程，配置也开始较为复杂 war：tomcat运行 Spring再简化：SpringBoot -jar:内嵌tomcat;微服务·架构！ 服务越来越多：springcloud - SpringBoot学习路线SpringBoo">
<meta property="og:type" content="article">
<meta property="og:title" content="Springboot框架">
<meta property="og:url" content="https://jilfoyle-9527.github.io/2022/07/22/Springboot%E6%A1%86%E6%9E%B6/index.html">
<meta property="og:site_name" content="Jilfoyle">
<meta property="og:description" content="- 微服务阶段javase：OOP mysql：持久化 html+css+js+jquery+框架 javaweb：独立开发MVC三层架构的网站 SSM：框架;简化我们的开发流程，配置也开始较为复杂 war：tomcat运行 Spring再简化：SpringBoot -jar:内嵌tomcat;微服务·架构！ 服务越来越多：springcloud - SpringBoot学习路线SpringBoo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jilfoyle-9527.github.io/medias/linux/springboot.png">
<meta property="article:published_time" content="2022-07-21T16:36:00.000Z">
<meta property="article:modified_time" content="2023-04-11T14:40:31.344Z">
<meta property="article:author" content="Jilfoyle">
<meta property="article:tag" content="框架">
<meta property="article:tag" content="Springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jilfoyle-9527.github.io/medias/linux/springboot.png"><link rel="shortcut icon" href="/img/index.ico"><link rel="canonical" href="https://jilfoyle-9527.github.io/2022/07/22/Springboot%E6%A1%86%E6%9E%B6/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Springboot框架',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-11 22:40:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://img2.baidu.com/it/u=343850545,2320437498&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">262</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/medias/linux/springboot.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jilfoyle</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Springboot框架</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-21T16:36:00.000Z" title="发表于 2022-07-22 00:36:00">2022-07-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-11T14:40:31.344Z" title="更新于 2023-04-11 22:40:31">2023-04-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Springboot框架"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h4 id="微服务阶段"><a href="#微服务阶段" class="headerlink" title="- 微服务阶段"></a>- 微服务阶段</h4><p>javase：OOP</p>
<p>mysql：持久化</p>
<p>html+css+js+jquery+框架</p>
<p>javaweb：独立开发MVC三层架构的网站</p>
<p>SSM：框架;简化我们的开发流程，配置也开始较为复杂</p>
<p>war：tomcat运行</p>
<p>Spring再简化：SpringBoot -jar:内嵌tomcat;微服务·架构！</p>
<p>服务越来越多：springcloud</p>
<h4 id="SpringBoot学习路线"><a href="#SpringBoot学习路线" class="headerlink" title="- SpringBoot学习路线"></a>- SpringBoot学习路线</h4><p><strong>SpringBoot</strong></p>
<ul>
<li>是什么</li>
<li>如何配置编写yaml</li>
<li>自动装配的原理</li>
<li>集成web开发：业务的核心</li>
<li>分布式开发：Dubbo+zookeeper</li>
<li>swagger:接口文档</li>
<li>任务调度</li>
<li>SpringSecurity：Shiro</li>
</ul>
<p><strong>SpringCould</strong></p>
<ul>
<li>微服务</li>
<li>springcould入门</li>
<li>Resful风格</li>
<li>Eureka</li>
<li>Ribbon</li>
<li>Feign</li>
<li>HyStrix</li>
<li>Zuul路由网关</li>
<li>SpringCloud config：git</li>
</ul>
<h4 id="原理初探"><a href="#原理初探" class="headerlink" title="- 原理初探"></a>- 原理初探</h4><p>自动配置：</p>
<p>pom.xml</p>
<ul>
<li>spring-boot-dependencies：核心依赖在父工程中</li>
<li>我们写或引入一些Springboot依赖的时候，不需要指定版本，就因为由这些版本仓库</li>
</ul>
<p>启动器</p>
<ul>
<li><p>```xml</p>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter</artifactId>
</dependency>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **启动器：**Springboot的启动场景</span><br><span class="line"></span><br><span class="line">- 比如spring-boot-starter-web,他会帮我们导入web环境的所有依赖！</span><br><span class="line"></span><br><span class="line">- springboot会将</span><br><span class="line"></span><br><span class="line">- 注解</span><br><span class="line"></span><br><span class="line">  - ```java</span><br><span class="line">    @SpringBootApplication：标注这个类是一个springboot的应用：启动类下的所有资源被导入</span><br><span class="line">    </span><br><span class="line">    - SpringBootConfiguration：Springboot配置</span><br><span class="line">      - @Configuration：Spring的配置类</span><br><span class="line">      - @Component：说明这也是一个Spring的组件</span><br><span class="line">    - @EnableAutoConfiguration：自动配置</span><br><span class="line">      - @AutoConfigurationPackage：自动配置包</span><br><span class="line">      - @Import(AutoConfigurationPackages.Registrat.class)：自动配置&quot;包注册&quot;</span><br><span class="line">      - @Import(AutoConfigurationImportSelector.class)：自动配置导入选择</span><br><span class="line">    //获取所有配置</span><br><span class="line">       List&lt;String&gt; configurations=getCandidateConfigurations(annotationMetadata,attribuates);</span><br></pre></td></tr></table></figure>

<p>总结：springboot所有的自动配置都是在启动的时候扫面并加载：spring.factories所有的自动配置类都在这里，但不一定生效，要判断条件是否成立，只有导入对应的star，就有对应的启动器，有了启动器，自动配置就会生效，然后就配置成功。</p>
</li>
<li><p>步骤</p>
<ol>
<li>springboot启动，从类路径下/META-INF/spring.factories获取指定的值；</li>
<li>将这些自动配置的类导入容器，自动装配生效</li>
<li>整合javaEE,解决方案和自动配置的东西都在spring-boot-autoconfig-2.2.0.RELEASE.JAR中</li>
<li>他会把所有需要导入的组件，以类名的方式返回，这些组件就会被添加到容器</li>
</ol>
</li>
</ul>
<h4 id="了解主启动类怎么运行"><a href="#了解主启动类怎么运行" class="headerlink" title="- 了解主启动类怎么运行"></a>- 了解主启动类怎么运行</h4><p>开始执行run()方法</p>
<ol>
<li>推断应用类型是普通项目还是Web项目</li>
<li>查找并加载所有可用初始化器，设置带initializers属性中</li>
<li>找出所有的应用程序监听器，设置到listeners属性中</li>
<li>推断并设置main方法的定义类，找到运行的主类</li>
</ol>
<h4 id="yaml语法"><a href="#yaml语法" class="headerlink" title="- yaml语法"></a>- yaml语法</h4><p>语法结构：key: 空格 value</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对象</span></span><br><span class="line"><span class="attr">student:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">qinjing</span></span><br><span class="line"> <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line"><span class="comment">#行内写法</span></span><br><span class="line"><span class="attr">Student:</span> &#123;<span class="attr">name:</span> <span class="string">qinjaing</span>,<span class="attr">age:</span> <span class="number">3</span>&#125;</span><br><span class="line"><span class="comment">#数组</span></span><br><span class="line"><span class="attr">pets:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">dog</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">pig</span></span><br><span class="line"><span class="attr">pets:</span> [<span class="string">cat</span>,<span class="string">dog</span>,<span class="string">pig</span>]</span><br></pre></td></tr></table></figure>

<h4 id="给属性赋值的几种方式"><a href="#给属性赋值的几种方式" class="headerlink" title="- 给属性赋值的几种方式"></a>- 给属性赋值的几种方式</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">qianjaing</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">happy:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2019</span><span class="string">/11/02</span></span><br><span class="line">  <span class="attr">maps:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">  <span class="attr">lists:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">code,</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">music,</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">girl</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">旺财</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">12</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span>#将配置文件中配置的属性值，映射到这个组件中</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">person</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">person</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">getHappy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> happy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHappy</span><span class="params">(Boolean happy)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.happy = happy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirth</span><span class="params">(Date birth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birth = birth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title function_">getMaps</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMaps</span><span class="params">(Map&lt;String, Object&gt; maps)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.maps = maps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">getLists</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> lists;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLists</span><span class="params">(List&lt;Object&gt; lists)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.lists = lists;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, happy=&quot;</span> + happy +</span><br><span class="line">                <span class="string">&quot;, birth=&quot;</span> + birth +</span><br><span class="line">                <span class="string">&quot;, maps=&quot;</span> + maps +</span><br><span class="line">                <span class="string">&quot;, lists=&quot;</span> + lists +</span><br><span class="line">                <span class="string">&quot;, dog=&quot;</span> + dog +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="JSR303校验"><a href="#JSR303校验" class="headerlink" title="- JSR303校验"></a>- JSR303校验</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Null</span>        被注释元素必须为空</span><br><span class="line"><span class="meta">@NotNull</span>    被注释元素必须不为空</span><br><span class="line"><span class="meta">@NotBlank</span>   检查约束字符串是不是Null还有被Trim的长度是否大于<span class="number">0</span>，只对字符串，且会去掉前后空格</span><br><span class="line"><span class="meta">@AssertTrue</span>  被注释元素必须为True</span><br><span class="line"><span class="meta">@AssertFalse</span> 被注释元素必须为False</span><br><span class="line"><span class="meta">@Min(value)</span>  被注释元素必须为数字，其值必须大于等于指定的最小值</span><br><span class="line"><span class="meta">@Max(value)</span>  被注释元素必须为数字，其值必须小于等于指定的最大值</span><br><span class="line"><span class="meta">@DeciamlMin(value)</span> 被注释元素必须为数字，其值必须大于等于指定的最小值</span><br><span class="line"><span class="meta">@DecimalMax(value)</span> 被注释元素必须为数字，其值必须小于等于指定的最大值</span><br><span class="line"><span class="meta">@Size(max,min)</span>     </span><br><span class="line"><span class="meta">@Digits(integer,fraction)</span>  被注释元素必须是一个数字，其值在可接受范围内</span><br><span class="line"><span class="meta">@Past</span>        被注释元素是过去的日期</span><br><span class="line"><span class="meta">@Future</span>      被注释元素必须是将来的日期</span><br><span class="line"><span class="meta">@Pattern</span>     被注释元素必须符合指定的正则表达式</span><br><span class="line"><span class="meta">@Email</span>       被注释的元素必须是电子邮箱地址</span><br><span class="line"><span class="meta">@Length</span>      被注释的字符串的大小必须在指定的范围内</span><br><span class="line"><span class="meta">@NotEmpty</span>    被注释的字符串必须非空</span><br><span class="line"><span class="meta">@Range</span>       被注释的元素必须在合适的范围内</span><br></pre></td></tr></table></figure>

<h4 id="多环境切换及配置文件位置"><a href="#多环境切换及配置文件位置" class="headerlink" title="- 多环境切换及配置文件位置"></a>- 多环境切换及配置文件位置</h4><p>配置文件可以存放的位置：</p>
<ul>
<li>file：./config/</li>
<li>file：./</li>
<li>classpath：/config/</li>
<li>classpath：/</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多个properties文件，配置文件的指定</span></span><br><span class="line"><span class="attr">-</span> <span class="string">application.properties 主环境配置文件</span></span><br><span class="line"><span class="attr">-</span> <span class="string">application-test.properties 测试环境配置文件</span></span><br><span class="line"><span class="attr">-</span> <span class="string">application-dev.properties  开发环境配置文件</span></span><br><span class="line"><span class="comment">#可以选择激活哪一个配置文件</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#yaml文件中环境的切换</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="comment">#选择要激活那个环境块</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span> <span class="comment">#配置环境的名称</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">prod</span>  <span class="comment">#配置环境的名称</span></span><br><span class="line"><span class="comment">#注意：如果yml和properties同时都配置了端口，并且没有激活其他环境 ， 默认会使用properties配置文件的！</span></span><br></pre></td></tr></table></figure>

<h4 id="SpringBoot-Web开发"><a href="#SpringBoot-Web开发" class="headerlink" title="- SpringBoot Web开发"></a>- SpringBoot Web开发</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">要解决的问题：</span><br><span class="line">- 导入静态资源</span><br><span class="line">- 首页</span><br><span class="line">- jsp,模板引擎Thymeleaf</span><br><span class="line">- 装配扩展SpringMVC</span><br><span class="line">- 增删改查</span><br><span class="line">- 拦截器</span><br><span class="line">- 国际化</span><br></pre></td></tr></table></figure>

<ol>
<li>在springboot中，我们可以使用以下方式处理静态资源<ul>
<li>webjars   localhost:8080/webjars/</li>
<li>public,static,/**,resources      localhost:8080/</li>
</ul>
</li>
<li>优先级：resource&gt;static(默认)&gt;public</li>
</ol>
<h5 id="Thymeleaf模板引擎"><a href="#Thymeleaf模板引擎" class="headerlink" title="- Thymeleaf模板引擎"></a>- Thymeleaf模板引擎</h5><ul>
<li><p><strong>templetes目录下的所有页面，只能通过controller来跳转</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入模板引擎依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-java8time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Thymeleaf的使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--1.导入头文件xmlns:th=&quot;http://www.thymeleaf.org--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">media</span>=<span class="string">&quot;all&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">href</span>=<span class="string">&quot;../../css/gtvg.css&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/gtvg.css&#125;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Test<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;#&#123;home.welcome&#125;&quot;</span>&gt;</span>Welcome to our grocery store!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line">Thymeleaf语法：</span><br><span class="line"> - 变量：$&#123;……&#125;</span><br><span class="line"> - 选择表达式：*&#123;……&#125;</span><br><span class="line"> - 消息：#&#123;……&#125;</span><br><span class="line"> - 链接：@&#123;……&#125;</span><br><span class="line"> - Framgent Expressions：~&#123;……&#125;</span><br><span class="line"> - 包含：th:insert th:replace</span><br><span class="line"> - 遍历：th:each</span><br><span class="line"> - 条件判断：th:if  th:unless  th:switch  th:case</span><br><span class="line"> - 定义变量：th:object  th:with</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MymvcController</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">	<span class="meta">@Override</span><span class="comment">//静态资源过滤器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/**&quot;</span>).addResourceLocations(<span class="string">&quot;classpath:/static/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="MVC配置原理"><a href="#MVC配置原理" class="headerlink" title="- MVC配置原理"></a>- MVC配置原理</h5><ul>
<li><p>自定义视图解析器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//自定义一个自己的视图解析器MyViewResolver</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyViewResolver</span> <span class="keyword">implements</span> <span class="title class_">ViewResolver</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> View <span class="title function_">resolveViewName</span><span class="params">(String viewName, Locale locale)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ViewResolver 实现了视图解析器接口的类，我们就可以把他看作视图解析器</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">mvcConfig</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyViewResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>扩展springmvc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class MymvcController implements WebMvcConfigurer &#123;</span><br><span class="line"></span><br><span class="line">    //自定义视图解析器</span><br><span class="line">    @Override</span><br><span class="line">    public void addViewControllers(ViewControllerRegistry registry) &#123;</span><br><span class="line">        registry.addViewController(&quot;/&quot;).setViewName(&quot;login&quot;);</span><br><span class="line">        registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;login&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean//注入容器,自定义国际化组件生效了</span><br><span class="line">    public LocaleResolver MyLocalResolver()&#123;</span><br><span class="line">        return new MyLocalResolver();</span><br><span class="line">    &#125;</span><br><span class="line">	//自定义拦截器</span><br><span class="line">    @Override</span><br><span class="line">    public void addInterceptors(InterceptorRegistry registry) &#123;//拦截哪些</span><br><span class="line">        registry.addInterceptor(new LoginHandleInterceptor()).addPathPatterns(&quot;/**&quot;)</span><br><span class="line">                .excludePathPatterns(&quot;/index.html&quot;,&quot;/&quot;,&quot;/user/login&quot;,&quot;/css/*&quot;,&quot;/js/**&quot;,&quot;/img/**&quot;);//排除哪些</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override//自定义资源过滤器</span><br><span class="line">    public void addResourceHandlers(ResourceHandlerRegistry registry) &#123;</span><br><span class="line">        registry.addResourceHandler(&quot;/**&quot;).addResourceLocations(&quot;classpath:/static/&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="国际化"><a href="#国际化" class="headerlink" title="- 国际化"></a>- 国际化</h5><ol>
<li><p>首页配置：所有页面静态资源都需要thymeleaf接管</p>
</li>
<li><p>页面国际化：</p>
<ul>
<li>配置<strong>i18n</strong>文件</li>
<li>如果需要在项目中进行按钮自动切换，需要自定义组件LocalResolver</li>
<li>需要将自己写的组件配置到spring容器中@Bean</li>
<li>#{}</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义国际化</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLocalResolver</span> <span class="keyword">implements</span> <span class="title class_">LocaleResolver</span> &#123;</span><br><span class="line">    <span class="comment">//解析请求</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Locale <span class="title function_">resolveLocale</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="comment">//获取参数中的请求连接</span></span><br><span class="line">        String language=request.getParameter(<span class="string">&quot;l&quot;</span>);</span><br><span class="line">        Locale local=Locale.getDefault();<span class="comment">//如果没有使用默认</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.isEmpty(language))&#123;</span><br><span class="line">            String[] split=language.split(language);</span><br><span class="line">            local=<span class="keyword">new</span> <span class="title class_">Locale</span>(split[<span class="number">0</span>],split[<span class="number">1</span>]);<span class="comment">//国家。地区</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> local;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLocale</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Locale locale)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义视图解析器</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MymvcController</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index.html&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span><span class="comment">//注入容器</span></span><br><span class="line">    <span class="keyword">public</span> LocaleResolver <span class="title function_">MyLocalResolver</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyLocalResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#关闭模板引擎的缓存</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"> <span class="attr">thymeleaf:</span></span><br><span class="line">  <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment">#国际化配置文件的文件位置</span></span><br><span class="line"> <span class="attr">message.basename:</span> <span class="string">i18n.login</span></span><br><span class="line"> <span class="attr">mvc:</span></span><br><span class="line">  <span class="attr">data-format:</span> <span class="string">yyyy-MM-dd</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="拦截器"><a href="#拦截器" class="headerlink" title="- 拦截器"></a>- 拦截器</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义拦截器</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginHandleInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//登陆成功则可以获取到用户的session retun true 放行;</span></span><br><span class="line">        <span class="comment">//否则给出提示，并返回登陆页面request.getRequestDispatcher(&quot;/index.html&quot;).forward(request,response);</span></span><br><span class="line">        Object login=request.getSession().getAttribute(<span class="string">&quot;loginUser&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(login==<span class="literal">null</span>)&#123;</span><br><span class="line">            request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;没有权限，请先登录&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/index.html&quot;</span>).forward(request,response);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="学习目标"><a href="#学习目标" class="headerlink" title="- 学习目标"></a>- 学习目标</h5><ul>
<li>JDBC</li>
<li>Mybatis</li>
<li>Druid</li>
<li>Shiro</li>
<li>Spring Security</li>
<li>异步任务，邮件发送，定时任务</li>
<li>Swagger</li>
<li>Dubbo+Zookeeper</li>
</ul>
<hr>
<h5 id="JDBC"><a href="#JDBC" class="headerlink" title="- JDBC"></a>- JDBC</h5><ul>
<li><p>配置文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Spring:</span></span><br><span class="line"> <span class="attr">datasource:</span></span><br><span class="line"> <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line"> <span class="attr">password:</span> <span class="string">xxxxxx</span></span><br><span class="line"> <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line"> <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Druid"><a href="#Druid" class="headerlink" title="- Druid"></a>- Druid</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#整合Druid   https://www.cnblogs.com/hellokuangshen/p/12497041.html</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssmbuild?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></table></figure>

<h5 id="Mybatis"><a href="#Mybatis" class="headerlink" title="- Mybatis"></a>- Mybatis</h5><ol>
<li><p>```xml</p>
<!--导入启动类-->
<dependency>
     <groupId>org.mybatis.spring.boot</groupId>
     <artifactId>mybatis-spring-boot-starter</artifactId>
     <version>2.1.1</version>
</dependency>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```java</span><br><span class="line">   //编写mapper接口</span><br><span class="line">   @Mapper</span><br><span class="line">   @Repository</span><br><span class="line">   public interface UserMapper &#123;</span><br><span class="line">       @Select(&quot;select * from EmployeeMap&quot;)//例：注解方式</span><br><span class="line">       List&lt;EmployeeMap&gt; queryUserList();</span><br><span class="line">       user queryUserById(String name);</span><br><span class="line">       int addUser(user user);</span><br><span class="line">       int updateUser(user user);</span><br><span class="line">       int deleteUser(String name);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--编写sql语句抽取到xml文件中--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.mapper.EmployeeMapper&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--&lt;cache/&gt;开启缓存--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;EmployeeMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;eid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;last_name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">column</span>=<span class="string">&quot;birth&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;eDepartment&quot;</span>  <span class="attr">javaType</span>=<span class="string">&quot;Department&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;did&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;departmentName&quot;</span> <span class="attr">column</span>=<span class="string">&quot;dname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getEmployees&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;EmployeeMap&quot;</span>&gt;</span></span><br><span class="line">        select e.id as eid,last_name,email,gender,birth,d.id as did,d.department_name as dname</span><br><span class="line">        from department d,employee e</span><br><span class="line">        where d.id = e.department</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;save&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        insert into employee (last_name,email,gender,department,birth)</span><br><span class="line">        values (#&#123;lastName&#125;,#&#123;email&#125;,#&#123;gender&#125;,#&#123;department&#125;,#&#123;birth&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;get&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Employee&quot;</span>&gt;</span></span><br><span class="line">        select * from employee where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from employee where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>```yaml<br>#连接数据库<br>spring:<br>  datasource:</p>
<pre><code>username: root
password: xxxxx
#?serverTimezone=UTC解决时区的报错
url: jdbc:mysql://localhost:3306/ssmbuild?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8
driver-class-name: com.mysql.cj.jdbc.Driver
type: com.alibaba.druid.pool.DruidDataSource

#Spring Boot 默认是不注入这些属性值的，需要自己绑定
#druid 数据源专有配置
initialSize: 5
minIdle: 5
maxActive: 20
maxWait: 60000
timeBetweenEvictionRunsMillis: 60000
minEvictableIdleTimeMillis: 300000
validationQuery: SELECT 1 FROM DUAL
testWhileIdle: true
testOnBorrow: false
testOnReturn: false
poolPreparedStatements: true

#配置监控统计拦截的filters，stat:监控统计、log4j：日志记录、wall：防御sql注入
#如果允许时报错  java.lang.ClassNotFoundException: org.apache.log4j.Priority
#则导入 log4j 依赖即可，Maven 地址：https://mvnrepository.com/artifact/log4j/log4j
filters: stat,wall,log4j
maxPoolPreparedStatementPerConnectionSize: 20
useGlobalDataSourceStat: true
connectionProperties: druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500
</code></pre>
<p>#整合mybatis<br>mybatis:</p>
<pre><code>#实体类存在的位置
</code></pre>
<p>  type-aliases-package: com.jilf.demo.pojo<br>  #扫描sql抽取xml的位置<br>  mapper-locations: classpath:mybatis/mapper/*.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### - MybatisPlus</span><br><span class="line"></span><br><span class="line">- ```yaml</span><br><span class="line">  #开启日志，方便调试</span><br><span class="line">  mybatis-plus:</span><br><span class="line">    configuration:</span><br><span class="line">      log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>```xml</p>
<!--导入依赖-->
<dependency>
      <groupId>com.baomidou</groupId>
      <artifactId>mybatis-plus-boot-starter</artifactId>
      <version>3.0.5</version>
</dependency>
<dependency>
    <groupId>org.apache.velocity</groupId>
      <artifactId>velocity-engine-core</artifactId>
      <version>2.0</version>
</dependency>
<dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.29</version>
        </dependency>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  //代码生成器</span><br><span class="line">  public class CodeGenerator &#123;</span><br><span class="line">      @Test</span><br><span class="line">      public void run() &#123;</span><br><span class="line">  </span><br><span class="line">          // 1、创建代码生成器</span><br><span class="line">          AutoGenerator mpg = new AutoGenerator();</span><br><span class="line">  </span><br><span class="line">          // 2、全局配置</span><br><span class="line">          GlobalConfig gc = new GlobalConfig();</span><br><span class="line">          String projectPath = System.getProperty(&quot;user.dir&quot;);</span><br><span class="line">          gc.setOutputDir(&quot;C:\\Users\\Jilfoyle\\Desktop\\项目源码\\day02\\guli_parent\\service\\service_edu&quot; + &quot;/src/main/java&quot;);</span><br><span class="line">  </span><br><span class="line">          gc.setAuthor(&quot;testjava&quot;);</span><br><span class="line">          gc.setOpen(false); //生成后是否打开资源管理器</span><br><span class="line">          gc.setFileOverride(false); //重新生成时文件是否覆盖</span><br><span class="line">  </span><br><span class="line">          //UserServie</span><br><span class="line">          gc.setServiceName(&quot;%sService&quot;);	//去掉Service接口的首字母I</span><br><span class="line">  </span><br><span class="line">          gc.setIdType(IdType.ID_WORKER_STR); //主键策略</span><br><span class="line">          gc.setDateType(DateType.ONLY_DATE);//定义生成的实体类中日期类型</span><br><span class="line">          gc.setSwagger2(true);//开启Swagger2模式</span><br><span class="line">  </span><br><span class="line">          mpg.setGlobalConfig(gc);</span><br><span class="line">  </span><br><span class="line">          // 3、数据源配置</span><br><span class="line">          DataSourceConfig dsc = new DataSourceConfig();</span><br><span class="line">          dsc.setUrl(&quot;jdbc:mysql://localhost:3306/ssmbuild?serverTimezone=GMT%2B8&quot;);</span><br><span class="line">          dsc.setDriverName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span><br><span class="line">          dsc.setUsername(&quot;root&quot;);</span><br><span class="line">          dsc.setPassword(&quot;123456&quot;);</span><br><span class="line">          dsc.setDbType(DbType.MYSQL);</span><br><span class="line">          mpg.setDataSource(dsc);</span><br><span class="line">  </span><br><span class="line">          // 4、包配置</span><br><span class="line">          PackageConfig pc = new PackageConfig();</span><br><span class="line">          pc.setModuleName(&quot;eduservice&quot;); //模块名</span><br><span class="line">          //包  com.atguigu.eduservice</span><br><span class="line">          pc.setParent(&quot;com.atguigu&quot;);</span><br><span class="line">          //包  com.atguigu.eduservice.controller</span><br><span class="line">          pc.setController(&quot;controller&quot;);</span><br><span class="line">          pc.setEntity(&quot;entity&quot;);</span><br><span class="line">          pc.setService(&quot;service&quot;);</span><br><span class="line">          pc.setMapper(&quot;mapper&quot;);</span><br><span class="line">          mpg.setPackageInfo(pc);</span><br><span class="line">  </span><br><span class="line">          // 5、策略配置</span><br><span class="line">          StrategyConfig strategy = new StrategyConfig();</span><br><span class="line">  </span><br><span class="line">          strategy.setInclude(&quot;edu_course&quot;,&quot;edu_course_description&quot;,&quot;edu_chapter&quot;,&quot;edu_video&quot;);//表</span><br><span class="line">  </span><br><span class="line">          strategy.setNaming(NamingStrategy.underline_to_camel);//数据库表映射到实体的命名策略</span><br><span class="line">          strategy.setTablePrefix(pc.getModuleName() + &quot;_&quot;); //生成实体时去掉表前缀</span><br><span class="line">  </span><br><span class="line">          strategy.setColumnNaming(NamingStrategy.underline_to_camel);//数据库表字段映射到实体的命名策略</span><br><span class="line">          strategy.setEntityLombokModel(true); // lombok 模型 @Accessors(chain = true) setter链式操作</span><br><span class="line">  </span><br><span class="line">          strategy.setRestControllerStyle(true); //restful api风格控制器</span><br><span class="line">          strategy.setControllerMappingHyphenStyle(true); //url中驼峰转连字符</span><br><span class="line">  </span><br><span class="line">          mpg.setStrategy(strategy);</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">          // 6、执行</span><br><span class="line">          mpg.execute();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>//UserMapper继承BaseMapper<br>@Repository<br>public interface UserMapper extends BaseMapper<User> {</p>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  @Autowired</span><br><span class="line">      private UserMapper userMapper;</span><br><span class="line">  </span><br><span class="line">      @Test</span><br><span class="line">      public void contextLoads() &#123;</span><br><span class="line">          //查询操作</span><br><span class="line">          List&lt;User&gt; users=userMapper.selectList(null);</span><br><span class="line">          System.out.println(users);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>命名特点</strong>：表中字段create_time,实体类中createTime</p>
</li>
<li><p><strong>自动填充</strong>：不用set,用mp方法实现</p>
<ul>
<li><p>在实体类的属性上添加注解@TableField(fill=FieldFill.INSERT)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    		<span class="comment">//value=&quot;字段&quot;，可字段和属性的映射，即使不符合命名特点</span></span><br><span class="line">    		<span class="comment">//type，设置主键类型和主键生成策略</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.UUID)</span><span class="comment">//主键自动填充，需要设置主键自增</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@TableField(fill = FieldFill.INSERT)</span><span class="comment">//添加时自动填充</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="meta">@TableField(fill=FieldFill.INSERT_UPDATE)</span><span class="comment">//修改时自动填充</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>//实现MetaObjectHandler中的方法<br>@Component<br>public class MymetaObjectHandler implements MetaObjectHandler {</p>
<pre><code>//使用mp实现添加操作，该方法执行
@Override
public void insertFill(MetaObject metaObject) &#123;
                            //字段       要修改的值
    this.setFieldValByName(&quot;createTime&quot;,new Date(),metaObject);
    this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);
&#125;
//使用mp修改操作，该方法执行
@Override
public void updateFill(MetaObject metaObject) &#123;
    this.setFieldValByName(&quot;updateTime&quot;,new Date(),metaObject);
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **乐观锁**：主要解决 丢失更新</span><br><span class="line"></span><br><span class="line">  - 若不考虑事务隔离性，产生读问题：脏读，不可重复读，幻读（虚读）</span><br><span class="line"></span><br><span class="line">  - 实现方式：</span><br><span class="line"></span><br><span class="line">    - 取出记录时，获得当前version</span><br><span class="line">    - 更新时，带上这个version</span><br><span class="line">    - 执行更新时，set version=newVersion where version=oldVersion</span><br><span class="line">    - 如果version不对，就更新失败</span><br><span class="line"></span><br><span class="line">  - 实现：</span><br><span class="line"></span><br><span class="line">    1. 数据库中添加version字段</span><br><span class="line"></span><br><span class="line">       ```sql</span><br><span class="line">       AlTER TABLE &#x27;user&#x27; add column &#x27;version&#x27; INT</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>实体类添加@Version注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="meta">@TableField(fill=FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure></li>
<li><p>元对象处理接口添加version的inser默认值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在MymetaObjectHandler中</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;version&quot;</span>,<span class="number">1</span>,metaObject);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>//在MyBatisPlus的接口中注册Bean，创建配置类；插件固定<br>@EnableTransactionManagement<br>@Configuration<br>@MapperScan(“扫描mapper包”)<br>public class MybatisPlusConfig{</p>
<pre><code>/**
 *乐观锁插件
 */
@Bean
public OptimisticLockerInterceptor optimisticLockInterceptor()&#123;
    return new OptimisticLockerInterceptor();
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **悲观锁**：串行</span><br><span class="line"></span><br><span class="line">- **mp的简单查询**</span><br><span class="line"></span><br><span class="line">  ```java</span><br><span class="line">  	@Test//根据id查询</span><br><span class="line">      public void testSelectById()&#123;</span><br><span class="line">          User user=  userMapper.selectById(1);</span><br><span class="line">          System.out.println(user);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      @Test//通过多个id,批量查询</span><br><span class="line">      public void testSelectBatchIds()&#123;</span><br><span class="line">          List&lt;User&gt; users=userMapper.selectBatchIds(Arrays.asList(1L,2L,3L));</span><br><span class="line">          users.forEach(System.out::println);</span><br><span class="line">      &#125;</span><br><span class="line">      @Test//通过map封装条件查询,批量查询</span><br><span class="line">      public void testSelectByMap()&#123;</span><br><span class="line">          HashMap&lt;String,Object&gt; map= new HashMap&lt;&gt;();</span><br><span class="line">          map.put(&quot;name&quot;,&quot;zzzzz&quot;);</span><br><span class="line">          map.put(&quot;age&quot;,20);</span><br><span class="line">          List&lt;User&gt; users=userMapper.selectByMap(map);</span><br><span class="line">          for (User user:users) &#123;</span><br><span class="line">              System.out.println(user);</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
</li>
<li><p><strong>MyBatisPlus实现分页</strong>：</p>
<ul>
<li><p>分页插件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> PaginationInterceptor <span class="title function_">pagintionInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>@Test//分页操作</p>
<pre><code>public void testPage()&#123;
    //创建Page对象：（当前页，每页记录数）
    Page&lt;User&gt; page=new Page&lt;&gt;(1,3);
    //调用mp分页查询方法
    userMapper.selectPage(page,null);

    System.out.println(page.getCurrent());//获取当前页
    System.out.println(page.getRecords());//获取记录数
    System.out.println(page.getSize());//获取当前记录数
    System.out.println(page.getTotal());//获取总记录数
    System.out.println(page.hasNext());//下一页
    System.out.println(page.hasPrevious());//上一页
&#125;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- **mp实现逻辑删除**</span><br><span class="line"></span><br><span class="line">  - 表中添加逻辑删除字段，对应实体类添加属性，属性添加注解**@TableLogic**</span><br><span class="line"></span><br><span class="line">  - 配置逻辑删除插件</span><br><span class="line"></span><br><span class="line">    ```java</span><br><span class="line">    @Bean//逻辑删除插件</span><br><span class="line">        public ISqlInjector sqlInjector()&#123;</span><br><span class="line">            return new LogicSqlInjector();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line"> <span class="attr">global-config:</span> <span class="comment">#逻辑删除默认值为0,1.不设置也可以</span></span><br><span class="line">   <span class="attr">db-config:</span></span><br><span class="line">     <span class="attr">logic-delete-value:</span> <span class="number">1</span></span><br><span class="line">     <span class="attr">logic-not-delete-value:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="comment">//逻辑删除测试文件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSqlInjector</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> result=userMapper.deleteById(<span class="number">4L</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>配置性能分析插件</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span><span class="comment">//SQL执行性能分析插件，开发环境使用，线上不推荐，maxTime指的是sql最大执行时长</span></span><br><span class="line">    <span class="meta">@Profile(&#123;&quot;dev&quot;,&quot;test&quot;&#125;)</span><span class="comment">//设置dev  test环境开启</span></span><br><span class="line">    <span class="keyword">public</span> PerformanceInterceptor <span class="title function_">performanceInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        PerformanceInterceptor performanceInterceptor=<span class="keyword">new</span> <span class="title class_">PerformanceInterceptor</span>();</span><br><span class="line">        performanceInterceptor.setMaxTime(<span class="number">100</span>);<span class="comment">//超过此处设定的ms则sql不执行</span></span><br><span class="line">        performanceInterceptor.setFormat(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> performanceInterceptor;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>条件查询</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">t1</span><span class="params">()</span>&#123;<span class="comment">//条件查询  ge&gt;= gt&gt; ne!= eq= it&lt; le&lt;=  between </span></span><br><span class="line">        QueryWrapper&lt;User&gt; wrapper=<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">        wrapper.ge(<span class="string">&quot;age&quot;</span>,<span class="number">30</span>);</span><br><span class="line">        List&lt;User&gt; users=userMapper.selectList(wrapper);</span><br><span class="line">        <span class="keyword">for</span>(User user:users)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>插件配置类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.jilf.mpdemo.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MpConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//乐观锁插件</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OptimisticLockerInterceptor <span class="title function_">optimisticLockerInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OptimisticLockerInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span><span class="comment">//分页插件</span></span><br><span class="line">    <span class="keyword">public</span> PaginationInterceptor <span class="title function_">paginationInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span><span class="comment">//逻辑删除插件</span></span><br><span class="line">    <span class="keyword">public</span> ISqlInjector <span class="title function_">sqlInjector</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LogicSqlInjector</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span><span class="comment">//SQL执行性能分析插件，开发环境使用，线上不推荐，maxTime指的是sql最大执行时长</span></span><br><span class="line">    <span class="meta">@Profile(&#123;&quot;dev&quot;,&quot;test&quot;&#125;)</span><span class="comment">//设置dev  test环境开启</span></span><br><span class="line">    <span class="keyword">public</span> PerformanceInterceptor <span class="title function_">performanceInterceptor</span><span class="params">()</span>&#123;</span><br><span class="line">        PerformanceInterceptor performanceInterceptor=<span class="keyword">new</span> <span class="title class_">PerformanceInterceptor</span>();</span><br><span class="line">        performanceInterceptor.setMaxTime(<span class="number">100</span>);<span class="comment">//超过此处设定的ms则sql不执行</span></span><br><span class="line">        performanceInterceptor.setFormat(<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> performanceInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>自动填充处理类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span><span class="comment">//自动填充</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MymetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用mp实现添加操作，该方法执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;version&quot;</span>,<span class="number">1</span>,metaObject);<span class="comment">//版本号初始为1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//使用mp修改操作，该方法执行</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>,<span class="keyword">new</span> <span class="title class_">Date</span>(),metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="SpringSecurity（安全）"><a href="#SpringSecurity（安全）" class="headerlink" title="- SpringSecurity（安全）"></a>- SpringSecurity（安全）</h5><p>简介：针对Spring boot的安全框架，对于安全控制，仅需引入spring-boot-starter-security模块。进行少量配置，即可实现强大的安全管理！</p>
<p>几个重要的类：</p>
<ul>
<li>WebSecurityConfigurerAdapter：自定义Security策略</li>
<li>AuthenticationManagerBuillder：自定义认证策略</li>
<li>@EnableWebSecurity：开启WebSecurity模式，@Enablelxxxx开启某个功能</li>
</ul>
<p>Spring Security的两个主要目标是“认证”和”授权”（访问控制）</p>
<ul>
<li>“认证”：（Authentication）</li>
<li>“授权”：（Authorization）</li>
</ul>
<p>常见的权限控制模块：</p>
<ul>
<li><p>功能权限</p>
</li>
<li><p>访问权限</p>
</li>
<li><p>菜单权限</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导包--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--security--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--security-thymeleaf整合包--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-springsecurity4<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h5 id="整合Swagger"><a href="#整合Swagger" class="headerlink" title="- 整合Swagger"></a>- 整合Swagger</h5><ul>
<li>```xml<pre><code>&lt;!--swagger--&gt;
&lt;dependency&gt;
        &lt;groupId&gt;io.springfox&lt;/groupId&gt;
        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
        &lt;scope&gt;provided &lt;/scope&gt;
        &lt;version&gt;2.7.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.springfox&lt;/groupId&gt;
        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
        &lt;scope&gt;provided &lt;/scope&gt;
    &lt;version&gt;2.7.0&lt;/version&gt;
</code></pre>
  </dependency>
        <dependency>
            <groupId>io.swagger</groupId>
            <artifactId>swagger-annotations</artifactId>
            <version>1.5.13</version>
        </dependency>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  @Configuration//配置类</span><br><span class="line">  @EnableSwagger2 //swagger注解</span><br><span class="line">  @EnableWebMvc</span><br><span class="line">  public class SwaggerConfig &#123;</span><br><span class="line">  </span><br><span class="line">      @Bean</span><br><span class="line">      public Docket webApiConfig()&#123;</span><br><span class="line">          return new Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                  .groupName(&quot;webApi&quot;)</span><br><span class="line">                  .apiInfo(webApiInfo())</span><br><span class="line">                  .select()</span><br><span class="line">                  .paths(Predicates.not(PathSelectors.regex(&quot;/admin/.*&quot;)))</span><br><span class="line">                  .paths(Predicates.not(PathSelectors.regex(&quot;/error.*&quot;)))</span><br><span class="line">                  .build();</span><br><span class="line">  </span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      private ApiInfo webApiInfo()&#123;</span><br><span class="line">  </span><br><span class="line">          return new ApiInfoBuilder()</span><br><span class="line">                  .title(&quot;网站-课程中心API文档&quot;)</span><br><span class="line">                  .description(&quot;本文档描述了课程中心微服务接口定义&quot;)</span><br><span class="line">                  .version(&quot;1.0&quot;)</span><br><span class="line">                  .contact(new Contact(&quot;java&quot;, &quot;http://atguigu.com&quot;, &quot;1123@qq.com&quot;))</span><br><span class="line">                  .build();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  /**</span><br><span class="line">   *若在其他模块中需要引用</span><br><span class="line">   *1.引入模块所在依赖</span><br><span class="line">   *2.在启动类中中开启组件扫描ComponentScan(basePachages=&#123;&quot;包路径&quot;&#125;)</span><br><span class="line">   */</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- 访问Swagger：**localhost:端口号/swagger-ui.html**</span><br><span class="line"></span><br><span class="line">- 注解：</span><br><span class="line"></span><br><span class="line">  - 定义在类上：**@Api（describe=&quot;描述&quot;）**</span><br><span class="line">  - 定义在方法上：**@ApiOperation（value=&quot;描述&quot;）**</span><br><span class="line">  - 定义在参数上：**@ApiParam（name=&quot;id&quot;,value=&quot;讲师ID&quot;，required=true）**</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">##### - 统一返回结果类</span><br><span class="line"></span><br><span class="line">​```java</span><br><span class="line">//统一返回结果的类</span><br><span class="line">@Data</span><br><span class="line">public class R &#123;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;是否成功&quot;)</span><br><span class="line">    private Boolean success;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;返回码&quot;)</span><br><span class="line">    private Integer code;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;返回消息&quot;)</span><br><span class="line">    private String message;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;返回数据&quot;)</span><br><span class="line">    private Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    //把构造方法私有</span><br><span class="line">    private R() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    //成功静态方法</span><br><span class="line">    public static R ok() &#123;</span><br><span class="line">        R r = new R();</span><br><span class="line">        r.setSuccess(true);</span><br><span class="line">        r.setCode(ResultCode.SUCCESS);</span><br><span class="line">        r.setMessage(&quot;成功&quot;);</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //失败静态方法</span><br><span class="line">    public static R error() &#123;</span><br><span class="line">        R r = new R();</span><br><span class="line">        r.setSuccess(false);</span><br><span class="line">        r.setCode(ResultCode.ERROR);</span><br><span class="line">        r.setMessage(&quot;失败&quot;);</span><br><span class="line">        return r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public R success(Boolean success)&#123;</span><br><span class="line">        this.setSuccess(success);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public R message(String message)&#123;</span><br><span class="line">        this.setMessage(message);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public R code(Integer code)&#123;</span><br><span class="line">        this.setCode(code);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public R data(String key, Object value)&#123;</span><br><span class="line">        this.data.put(key, value);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public R data(Map&lt;String, Object&gt; map)&#123;</span><br><span class="line">        this.setData(map);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="带条件的分页查询"><a href="#带条件的分页查询" class="headerlink" title="- 带条件的分页查询"></a>- 带条件的分页查询</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;pageTeacherCondition/&#123;current&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">pageTeacherCondition</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">long</span> current,<span class="meta">@PathVariable</span> <span class="type">long</span> limit,</span></span><br><span class="line"><span class="params">                              <span class="meta">@RequestBody(required = false)</span>  TeacherQuery teacherQuery)</span> &#123;</span><br><span class="line">    <span class="comment">//创建page对象				             //值可以没有</span></span><br><span class="line">    Page&lt;EduTeacher&gt; pageTeacher = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(current,limit);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//构建条件</span></span><br><span class="line">    QueryWrapper&lt;EduTeacher&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">   <span class="comment">// 多条件组合查询</span></span><br><span class="line">    <span class="comment">// mybatis学过 动态sql</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> teacherQuery.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">level</span> <span class="operator">=</span> teacherQuery.getLevel();</span><br><span class="line">    <span class="type">String</span> <span class="variable">begin</span> <span class="operator">=</span> teacherQuery.getBegin();</span><br><span class="line">    <span class="type">String</span> <span class="variable">end</span> <span class="operator">=</span> teacherQuery.getEnd();</span><br><span class="line">    <span class="comment">//判断条件值是否为空，如果不为空拼接条件</span></span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(name)) &#123;</span><br><span class="line">        <span class="comment">//构建条件</span></span><br><span class="line">        wrapper.like(<span class="string">&quot;name&quot;</span>,name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(level)) &#123;</span><br><span class="line">        wrapper.eq(<span class="string">&quot;level&quot;</span>,level);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(begin)) &#123;</span><br><span class="line">        wrapper.ge(<span class="string">&quot;gmt_create&quot;</span>,begin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!StringUtils.isEmpty(end)) &#123;</span><br><span class="line">        wrapper.le(<span class="string">&quot;gmt_create&quot;</span>,end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用方法实现条件查询分页</span></span><br><span class="line">    teacherService.page(pageTeacher,wrapper);</span><br><span class="line"></span><br><span class="line">    <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> pageTeacher.getTotal();<span class="comment">//总记录数</span></span><br><span class="line">    List&lt;EduTeacher&gt; records = pageTeacher.getRecords(); <span class="comment">//数据list集合</span></span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;total&quot;</span>,total).data(<span class="string">&quot;rows&quot;</span>,records);</span><br></pre></td></tr></table></figure>

<h5 id="全局统一异常处理类"><a href="#全局统一异常处理类" class="headerlink" title="- 全局统一异常处理类"></a>- 全局统一异常处理类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//指定出现什么异常执行这个方法</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">//为了返回数据</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;执行了全局异常处理..&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//特定异常处理类</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(ArithmeticException e)</span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;执行了特定异常处理类&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="自定义异常处理类"><a href="#自定义异常处理类" class="headerlink" title="- 自定义异常处理类"></a>- 自定义异常处理类</h5><ul>
<li><p>创建自定义异常类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GuliException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiModelProperty(type=&quot;状态码&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>业务中需要的位置抛出GuliException</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">	<span class="type">int</span> a=<span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">GuliException</span>(<span class="number">20001</span>,<span class="string">&quot;自定义异常&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>添加异常处理方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(GuliException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(GuliException e)</span>&#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">	<span class="keyword">return</span> R.error().message(e.getMsg()).code(e.getCode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="统一日志处理"><a href="#统一日志处理" class="headerlink" title="- 统一日志处理"></a>- 统一日志处理</h5><ol>
<li><p>配置日志级别：OFF，FATAL，ERROR，WARN，INFO，DEBUG，ALL</p>
<p>默认情况下,spring boot从控制台打印出来日志级别只有INFO及以上级别，可以配置日志级别</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置日志级别</span></span><br><span class="line"><span class="attr">logging.level.root</span>=<span class="string">WARN</span></span><br><span class="line"><span class="comment">#这种方式只能将日志打印在控制台</span></span><br></pre></td></tr></table></figure></li>
<li><p>配置Logback日志</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#删除: logging.level.root=WARN</span></span><br><span class="line"><span class="comment">#mybatis-plus.configuration.log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure></li>
<li><p>在resource中创建logback-spring.xml<br>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/datastructure18/article/details/120919329">https://blog.csdn.net/datastructure18/article/details/120919329</a></p>
<p>  如果程序运行出现异常，把异常信息输出到文件中</p>
<ul>
<li>在异常处理类上添加@Slf4j注解</li>
<li>在异常方法中输出异常语句：log.error(e.getMessage());</li>
</ul>
</li>
</ol>
<h5 id="ES6前端技术"><a href="#ES6前端技术" class="headerlink" title="- ES6前端技术"></a>- ES6前端技术</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var 声明的变量没有局部作用域</span></span><br><span class="line"><span class="comment">// let 声明的变量  有局部作用域</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">var</span> a = <span class="number">0</span></span><br><span class="line">	<span class="keyword">let</span> b = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)  <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b)  <span class="comment">// ReferenceError: b is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// var 可以声明多次</span></span><br><span class="line"><span class="comment">// let 只能声明一次</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">3</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(m)  <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n)  <span class="comment">// Identifier &#x27;n&#x27; has already been declared</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、声明之后不允许改变    </span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="string">&quot;3.1415926&quot;</span></span><br><span class="line"><span class="variable constant_">PI</span> = <span class="number">3</span>  <span class="comment">// TypeError: Assignment to constant variable.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、一但声明必须初始化，否则会报错</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">MY_AGE</span>  <span class="comment">// SyntaxError: Missing initializer in const declaration</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//解构赋值</span></span><br><span class="line"><span class="comment">//1、数组解构</span></span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, c)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> [x, y, z] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y, z)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//对象解构</span></span><br><span class="line"><span class="comment">//2、对象解构</span></span><br><span class="line"><span class="keyword">let</span> user = &#123;<span class="attr">name</span>: <span class="string">&#x27;Helen&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;</span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">let</span> name1 = user.<span class="property">name</span></span><br><span class="line"><span class="keyword">let</span> age1 = user.<span class="property">age</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name1, age1)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, age &#125; =  user<span class="comment">//注意：结构的变量必须是user中的属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//模板字符串</span></span><br><span class="line"><span class="comment">// 1、多行字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> string1 =  <span class="string">`Hey,</span></span><br><span class="line"><span class="string">can you stop angry now?`</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string1)</span><br><span class="line"><span class="comment">// Hey,</span></span><br><span class="line"><span class="comment">// can you stop angry now?2、对象解构</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、字符串插入变量和表达式。变量名写在 $&#123;&#125; 中，$&#123;&#125; 中可以放入 JavaScript 表达式。</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Mike&quot;</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="number">27</span></span><br><span class="line"><span class="keyword">let</span> info = <span class="string">`My Name is <span class="subst">$&#123;name&#125;</span>,I am <span class="subst">$&#123;age+<span class="number">1</span>&#125;</span> years old next year.`</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span><br><span class="line"><span class="comment">// My Name is Mike,I am 28 years old next year.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、字符串中调用函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;have fun!&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> string2 = <span class="string">`Game start,<span class="subst">$&#123;f()&#125;</span>`</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string2);  <span class="comment">// Game start,have fun!</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//声明对象简写</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="number">12</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;Amy&quot;</span></span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">const</span> person1 = &#123;<span class="attr">age</span>: age, <span class="attr">name</span>: name&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1)</span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">const</span> person2 = &#123;age, name&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2) <span class="comment">//&#123;age: 12, name: &quot;Amy&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义方法简写</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">const</span> person1 = &#123;</span><br><span class="line">    <span class="attr">sayHi</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">person1.<span class="title function_">sayHi</span>();<span class="comment">//&quot;Hi&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">const</span> person2 = &#123;</span><br><span class="line">    <span class="title function_">sayHi</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">person2.<span class="title function_">sayHi</span>()  <span class="comment">//&quot;Hi&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1、拷贝对象</span></span><br><span class="line"><span class="keyword">let</span> person1 = &#123;<span class="attr">name</span>: <span class="string">&quot;Amy&quot;</span>, <span class="attr">age</span>: <span class="number">15</span>&#125;</span><br><span class="line"><span class="keyword">let</span> someone = &#123; ...person1 &#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(someone)  <span class="comment">//&#123;name: &quot;Amy&quot;, age: 15&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、合并对象</span></span><br><span class="line"><span class="keyword">let</span> age = &#123;<span class="attr">age</span>: <span class="number">15</span>&#125;</span><br><span class="line"><span class="keyword">let</span> name = &#123;<span class="attr">name</span>: <span class="string">&quot;Amy&quot;</span>&#125;</span><br><span class="line"><span class="keyword">let</span> person2 = &#123;...age, ...name&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2)  <span class="comment">//&#123;age: 15, name: &quot;Amy&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//箭头函数</span></span><br><span class="line"><span class="comment">// 传统</span></span><br><span class="line"><span class="keyword">var</span> f1 = <span class="keyword">function</span>(<span class="params">a</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f1</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f2</span> = a =&gt; a</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f2</span>(<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当箭头函数没有参数或者有多个参数，要用 () 括起来。</span></span><br><span class="line"><span class="comment">// 当箭头函数函数体有多行语句，用 &#123;&#125; 包裹起来，表示代码块，</span></span><br><span class="line"><span class="comment">// 当只有一行语句，并且需要返回结果时，可以省略 &#123;&#125; , 结果会自动返回。</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f3</span> = (<span class="params">a,b</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> result = a+b</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f3</span>(<span class="number">6</span>,<span class="number">2</span>))  <span class="comment">// 8</span></span><br><span class="line"><span class="comment">// 前面代码相当于：</span></span><br><span class="line"><span class="keyword">var</span> <span class="title function_">f4</span> = (<span class="params">a,b</span>) =&gt; a+b</span><br></pre></td></tr></table></figure>

<h5 id="OSS云存储"><a href="#OSS云存储" class="headerlink" title="- OSS云存储"></a>- OSS云存储</h5><p><a target="_blank" rel="noopener" href="https://www.aliyun.com/product/oss?spm=5176.19720258.J_3207526240.36.e9392c4aCHGaCR">https://www.aliyun.com/product/oss?spm=5176.19720258.J_3207526240.36.e9392c4aCHGaCR</a></p>
<ol>
<li><p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--阿里云oss依赖--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--日期工具栏依赖--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>joda-time<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#服务端口</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8002</span></span><br><span class="line"><span class="comment">#服务名</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">service-oss</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#环境设置</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#阿里云OSS</span></span><br><span class="line"><span class="comment">#不用的服务器，地址不同</span></span><br><span class="line"><span class="attr">aliyun.oss.file.endpoint</span>=<span class="string">xxxxxx</span></span><br><span class="line"><span class="attr">aliyun.oss.file.keyid</span>=<span class="string">xxxxxxxx</span></span><br><span class="line"><span class="attr">aliyun.oss.file.keysecret</span>=<span class="string">xxxxxxx</span></span><br><span class="line"><span class="comment">#bucket可以在控制台创建，也可以用java代码创建</span></span><br><span class="line"><span class="attr">aliyun.oss.file.bucketname</span>=<span class="string">edu-jilf</span></span><br></pre></td></tr></table></figure></li>
<li><p>创建工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstantPropertiesUtils</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span> &#123;<span class="comment">//初始化接口，重写afterPropertiesSet()方法</span></span><br><span class="line">    <span class="comment">//读取配置文件</span></span><br><span class="line">    <span class="comment">// Endpoint</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.endpoint&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line">    <span class="comment">// 阿里云账号AccessKey</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keyid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessKeyId;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keysecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String accessKeySecret;</span><br><span class="line">    <span class="comment">// 填写Bucket名称</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.bucketname&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义静态常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String END_POINT;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEYID;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEYSECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String BUCKET_NAME;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">      END_POINT=endpoint;</span><br><span class="line">      ACCESS_KEYID=accessKeyId;</span><br><span class="line">      ACCESS_KEYSECRET=accessKeySecret;</span><br><span class="line">      BUCKET_NAME=bucketName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="EasyExcel"><a href="#EasyExcel" class="headerlink" title="- EasyExcel"></a>- EasyExcel</h5><p>应用场景：数据导入，导出，异构系统之间的数据传输</p>
<ol>
<li><p>```xml</p>
<dependencies>
    <!-- https://mvnrepository.com/artifact/com.alibaba/easyexcel -->
    <dependency>
        <groupId>com.alibaba</groupId>
        <artifactId>easyexcel</artifactId>
        <version>2.1.1</version>
    </dependency>
    
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;
    &lt;artifactId&gt;poi&lt;/artifactId&gt;
    &lt;version&gt;$&#123;poi.version&#125;&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!--xlsx--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;
    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;
    &lt;version&gt;$&#123;poi.version&#125;&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
</dependencies>
<!--xls-->
            
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. ```java</span><br><span class="line">   &lt;!--封装实体--&gt;</span><br><span class="line">   @Data</span><br><span class="line">   public class DemoData &#123;</span><br><span class="line">       @ExcelProperty(&quot;学生编号&quot;)</span><br><span class="line">       private Integer sno;</span><br><span class="line">       @ExcelProperty(&quot;学生姓名&quot;)</span><br><span class="line">       private String name;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br></pre></td></tr></table></figure></li>
<li><p>```java</p>
<!--测试写操作--!>
public class test {
    public static void main(String[] args) {
        
  //写法一：      
        //写入文件夹地址和excel文件名称
        String filename="D://write.xlsx";
        EasyExcel.write(filename,DemoData.class).sheet("学生列表").doWrite(getData());
  //写法二：
      //需要手动关闭流
        String fileName = "F:\\112.xlsx";   // 这里 需要指定写用哪个class去写
        ExcelWriter excelWriter = EasyExcel.write(fileName, DemoData.class).build();
        WriteSheet writeSheet = EasyExcel.writerSheet("写入方法二").build();
        excelWriter.write(data(), writeSheet);
        /// 千万别忘记finish 会帮忙关闭流
        excelWriter.finish();
    }
    
    private static List<DemoData> getData(){
        List<DemoData> list=new ArrayList<>();
        for(int i=0; i<10; i++){
            DemoData demoData=new DemoData();
            demoData.setSno(i);
            demoData.setName("张三"+i);
            list.add(demoData);
        }
        return list;
    }
}
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. ```java</span><br><span class="line">   //测试读操作</span><br><span class="line">   @RestController</span><br><span class="line">   @CrossOrigin</span><br><span class="line">   @RequestMapping(&quot;/eduservice/subject&quot;)</span><br><span class="line">   public class EduSubjectController &#123;</span><br><span class="line">   </span><br><span class="line">       @Autowired</span><br><span class="line">       private EduSubjectService subjectService;</span><br><span class="line">   </span><br><span class="line">       //添加课程分类</span><br><span class="line">       //获取上传过来的文件，把文件内容读出来</span><br><span class="line">       @PostMapping(&quot;addSubject&quot;)</span><br><span class="line">       public R addSubject(MultipartFile file)&#123;</span><br><span class="line">           //上传过来的文件</span><br><span class="line">           subjectService.saveSubject(file,subjectService);</span><br><span class="line">           return R.ok();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>```java<br>@Service<br>public class EduSubjectServiceImpl extends ServiceImpl&lt;EduSubjectMapper, EduSubject&gt; implements EduSubjectService {</p>
<pre><code>@Override//添加课程分类
public void saveSubject(MultipartFile file,EduSubjectService subjectService) &#123;

    try&#123;
        //文件输入流
        InputStream in=file.getInputStream();
        //调用方法进行读取
        EasyExcel.read(in, SubjectData.class,
                       new SubjectExcelListener(subjectService)).sheet().doRead();
    &#125;catch (Exception e)&#123;
        e.printStackTrace();
    &#125;
&#125;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```java</span><br><span class="line">  public class SubjectExcelListener extends AnalysisEventListener&lt;SubjectData&gt; &#123;</span><br><span class="line">  </span><br><span class="line">      //因为SubjectListener不能交给spring进行管理，需要自己new，不能注入其他对象</span><br><span class="line">      //不能实现数据库操作</span><br><span class="line">      public EduSubjectService subjectService;</span><br><span class="line">      public SubjectExcelListener() &#123; &#125;</span><br><span class="line">  </span><br><span class="line">      public SubjectExcelListener(EduSubjectService subjectService) &#123;</span><br><span class="line">          this.subjectService = subjectService;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">      @Override</span><br><span class="line">      public void invoke(SubjectData subjectData, AnalysisContext analysisContext) &#123;</span><br><span class="line">          if (subjectData == null)&#123;</span><br><span class="line">              throw  new GuliException(20001,&quot;文件数据为空&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          //一行一行读，每次读取两个值，第一个值为一级分类，第二个值为二级分类</span><br><span class="line">          //判断一级分类是否重复</span><br><span class="line">          EduSubject existOneSubject=this.existOneSubject(subjectService,subjectData.getOneSubjectName());</span><br><span class="line">          if(existOneSubject == null)&#123;//没有一级分类，进行添加</span><br><span class="line">              existOneSubject=new EduSubject();</span><br><span class="line">              existOneSubject.setParentId(&quot;0&quot;);</span><br><span class="line">              existOneSubject.setTitle(subjectData.getOneSubjectName());//一级分类名称</span><br><span class="line">              subjectService.save(existOneSubject);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">          String pid=existOneSubject.getId();</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">          //添加二级分类</span><br><span class="line">          EduSubject existTwoSubject=this.existOneSubject(subjectService,subjectData.getTwoSubjectName(),pid);</span><br><span class="line">          if(existTwoSubject == null)&#123;</span><br><span class="line">              existTwoSubject = new EduSubject();</span><br><span class="line">              existTwoSubject.setParentId(pid);</span><br><span class="line">              existTwoSubject.setTitle(subjectData.getTwoSubjectName());//二级分类名称</span><br><span class="line">              subjectService.save(existTwoSubject);</span><br><span class="line">          &#125;</span><br><span class="line">  </span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      //判断一级分类不重复添加</span><br><span class="line">      private EduSubject existOneSubject(EduSubjectService subjectService,String name )&#123;</span><br><span class="line">          QueryWrapper&lt;EduSubject&gt; wrapper=new QueryWrapper&lt;&gt;();</span><br><span class="line">          wrapper.eq(&quot;title&quot;,name);</span><br><span class="line">          wrapper.eq(&quot;parent_id&quot;,&#x27;0&#x27;);</span><br><span class="line">          EduSubject onesubject=subjectService.getOne(wrapper);</span><br><span class="line">          return onesubject;</span><br><span class="line">      &#125;</span><br><span class="line">      //判断二级分类不重复添加</span><br><span class="line">      private EduSubject existOneSubject(EduSubjectService subjectService,String name,String pid )&#123;</span><br><span class="line">          QueryWrapper&lt;EduSubject&gt; wrapper=new QueryWrapper&lt;&gt;();</span><br><span class="line">          wrapper.eq(&quot;title&quot;,name);</span><br><span class="line">          wrapper.eq(&quot;parent_id&quot;,pid);</span><br><span class="line">          EduSubject twosubject=subjectService.getOne(wrapper);</span><br><span class="line">          return twosubject;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      @Override</span><br><span class="line">      public void doAfterAllAnalysed(AnalysisContext analysisContext) &#123;</span><br><span class="line">  </span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>```java<br>@Data<br>public class SubjectData {</p>
<pre><code>@ExcelProperty(index = 0)
private String oneSubjectName;

@ExcelProperty(index = 1)
private String twoSubjectName;
</code></pre>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### - 富文本编辑器</span><br><span class="line"></span><br><span class="line">参考：[首页 - Vue Element Admin (gitee.io)](https://panjiachen.gitee.io/vue-element-admin/#/dashboard)</span><br><span class="line"></span><br><span class="line">1. 复制脚本库：将脚本库复制到static目录下（在vue-element-admin-master的static路径下）</span><br><span class="line"></span><br><span class="line">2. 配置html变量</span><br><span class="line"></span><br><span class="line">   - 在webpack.dev.conf.js中添加配置，</span><br><span class="line"></span><br><span class="line">   - 使在html页面中可以使用这里定义的Base_URL变量</span><br><span class="line"></span><br><span class="line">     ```javascript</span><br><span class="line">     new HtmlWedpackPlugin(&#123;</span><br><span class="line">     	……,</span><br><span class="line">     	templateParameters: &#123;</span><br><span class="line">     		BASE_URL:config.dev.assetsPublicPath+config.dev.assetsSubDirectory</span><br><span class="line">     	&#125;</span><br><span class="line">     &#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>引入脚本：在guli-admin/index.html中引入js脚本</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=&lt;%= <span class="string">BASE_URL</span> %&gt;</span>/tinymce4.7.5/tinymce.min.js&gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=&lt;%= <span class="string">BASE_URL</span> %&gt;</span>/tinymce4.7.5/langs/zh_CN.js&gt;<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>组件使用：</p>
<ol>
<li><p>复制组件：src/components/Tinymce</p>
</li>
<li><p>引入组件：课程信息中引入Tinymce</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import Tinymce from &#x27;@/components/Tinymce&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">	components:&#123;Tinymce&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>组件模板</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label=&quot;课程简介&quot;&gt;</span><br><span class="line">	&lt;tinymce :height=&quot;300&quot; /&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>组件样式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">    .tinymce-container &#123;</span><br><span class="line">        line-height: 29px;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;style&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="Git"><a href="#Git" class="headerlink" title="- Git"></a>- Git</h5><ol>
<li><p>安装：<a target="_blank" rel="noopener" href="https://registry.npmmirror.com/binary.html?path=git-for-windows/v2.36.1.windows.1/">https://registry.npmmirror.com/binary.html?path=git-for-windows/v2.36.1.windows.1/</a></p>
</li>
<li><p>配置</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#配置用户·和邮箱</span><br><span class="line">git config --global user.name &quot;Jilfoyle&quot;</span><br><span class="line">git config --global user.email &quot;<span class="number">918703864</span>@qq.com&quot;</span><br><span class="line">#查询配置信息</span><br><span class="line">git config --global --list</span><br></pre></td></tr></table></figure></li>
<li><p>git基本理论：</p>
<ul>
<li><p>工作区域：工作目录（working），暂存区(Stage/Index)，资源库（Repository）,远程仓库（Remote）</p>
<p><img src="http://m.qpic.cn/psc?/V13tJp0N3eCNl1/bqQfVz5yrrGYSXMvKr.cqXx6xQvmq4rfsk89r63XnOtOx3IFfsiQGQQa536wOm4MiC*eX33J5agMfHin4imDGG2qdFuDU0AEuJXS4RHNB6c!/b&bo=.AV5AwAAAAABF7c!&rf=viewer_4"></p>
</li>
</ul>
</li>
<li><p>项目搭建</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init #本地初始化</span><br><span class="line">git clone url #远程clone</span><br></pre></td></tr></table></figure></li>
<li><p>git文件操作</p>
<ul>
<li>文件</li>
</ul>
</li>
</ol>
<h5 id="nginx"><a href="#nginx" class="headerlink" title="- nginx"></a>- nginx</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#常用命令</span><br><span class="line">#启动停止:</span><br><span class="line">#先进入nginx目录，再进入子目录sbin</span><br><span class="line"></span><br><span class="line">nginx启动：./nginx</span><br><span class="line">nginx停止：./nginx -s stop</span><br><span class="line">nginx重新加载nginx.conf：./nginx -s reload</span><br><span class="line">nginx查看nginx.conf配置是否正确：./nginx -t</span><br><span class="line"></span><br><span class="line">修改配置：</span><br><span class="line">先进入nginx目录，再进入子目录conf</span><br><span class="line">修改nginx.conf文件</span><br></pre></td></tr></table></figure>



<h5 id="打包操作"><a href="#打包操作" class="headerlink" title="- 打包操作"></a>- 打包操作</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.项目打包时会将java目录中的*.xml文件也进行打包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/jave<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2.配置文件中添加--&gt;</span></span><br><span class="line">mybatis-plus.mapper-locations=classpath:com/atguigu/eduservice/mapper/xml/*.xml</span><br></pre></td></tr></table></figure>

<h5 id="添加jar包到本地maven仓库"><a href="#添加jar包到本地maven仓库" class="headerlink" title="- 添加jar包到本地maven仓库"></a>- 添加jar包到本地maven仓库</h5><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#例：添加aliyun-java-vod-upload-<span class="number">1</span>.<span class="number">4</span>.<span class="number">14</span>.jar</span><br><span class="line">mvn install:install-file</span><br><span class="line">-DgroupId=com.aliyun</span><br><span class="line">-DartifactId=aliyun-sdk-vod-upload</span><br><span class="line">-Dversion=<span class="number">1</span>.<span class="number">4</span>.<span class="number">14</span></span><br><span class="line">-Dpackaging=jar</span><br><span class="line">-Dfile=aliyun-java-vod-upload-<span class="number">1</span>.<span class="number">4</span>.<span class="number">14</span>.jar</span><br></pre></td></tr></table></figure>

<h5 id="微服务"><a href="#微服务" class="headerlink" title="- 微服务"></a>- 微服务</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.微服务是架构风格</span><br><span class="line">2.有多个服务，多个服务是独立运行，每个服务占用独立进程</span><br></pre></td></tr></table></figure>

<h6 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="- SpringCloud"></a>- SpringCloud</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpringCloud是一系列框架的集合，它利用Spring Boot的简化了分布式基础设施的开发，如服务发现。服务注册，配置中心，消息总线，负载均衡，熔断器，数据监控等，都可以用SpringBoot的开发风格做到一键启动和部署</span><br></pre></td></tr></table></figure>

<h6 id="SpringCloud基础服务组件"><a href="#SpringCloud基础服务组件" class="headerlink" title="- SpringCloud基础服务组件"></a>- SpringCloud基础服务组件</h6><ul>
<li>服务发现—Nacos</li>
<li>服务调用—Netflix Feign</li>
<li>熔断器—Netflix Hystrix</li>
<li>服务网关—Spring Cloud GateWay</li>
<li>分布式配置—Spring Cloud Config(Nacos)</li>
<li>消息总线—Spring Cloud Bus(Nacos)</li>
</ul>
<h6 id="SpringCloud小版本"><a href="#SpringCloud小版本" class="headerlink" title="- SpringCloud小版本"></a>- SpringCloud小版本</h6><ul>
<li>SNAPSHOT：快照版本，随时可能修改</li>
<li>M：MileStone,M1表示里程碑版本，一般同时标注PRE，表示预览版</li>
<li>SR：Service Release,SR1表示第一个正式版本，一般同时标注GA,表示稳定版本</li>
</ul>
<h6 id="Nacos下载和安装"><a href="#Nacos下载和安装" class="headerlink" title="- Nacos下载和安装"></a>- Nacos下载和安装</h6><p>地址：<a target="_blank" rel="noopener" href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p>
<p>版本：nacos-server-1.1.4.tar.gz或nacos-server-1.1.4.zip解压任意目录</p>
<h6 id="服务注册"><a href="#服务注册" class="headerlink" title="- 服务注册"></a>- 服务注册</h6><ol>
<li><p>引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入依赖--&gt;</span>	</span><br><span class="line"><span class="comment">&lt;!--服务注册--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--服务调用--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在要注册的服务配置文件application中配置Nacos地址</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure></li>
<li><p>在<strong>启动类</strong>添加**@EnableDiscoveryClient**注解</p>
</li>
</ol>
<h6 id="服务调用"><a href="#服务调用" class="headerlink" title="- 服务调用"></a>- 服务调用</h6><ol>
<li><p>在<strong>调用端的服务启动类</strong>上添加**@EnableFeignClients**注解</p>
</li>
<li><p>创建接口，在接口上添加注解**@Component<strong>，</strong>@FeignClient(“服务名字”)**</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@PathVariable注解一定要指定参数名称，否则出错</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@FeignClient(&quot;service-vod&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Vodclient</span>&#123;</span><br><span class="line">	 <span class="comment">//定义调用的方法路径</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/eduvod/video/removeAlyVideo/&#123;id&#125;&quot;)</span><span class="comment">//完整路径</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">removeAlyVideo</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> String id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在需要调用的controller中注入Vodclient实现远程调用</p>
</li>
</ol>
<h6 id="SpringCloud调用接口流程"><a href="#SpringCloud调用接口流程" class="headerlink" title="- SpringCloud调用接口流程"></a>- SpringCloud调用接口流程</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">接口化请求调用--call--&gt;(1)Feign --Hystrix熔断处理机制--&gt; (2)Hystrix --请求通过，则通过Ribbon负载均衡器，挑选合适的服务提供端--&gt;(3)Ribbon--请求包转换成Http Client客户端框架做真实的http通信请求--&gt;(4)HttpClient/OkHttp</span><br></pre></td></tr></table></figure>

<h6 id="整合熔断器"><a href="#整合熔断器" class="headerlink" title="- 整合熔断器"></a>- 整合熔断器</h6><ol>
<li><p>添加熔断器依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--负载均衡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-ribbon<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--hystrix依赖，主要是用  @HystrixCommand --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在调用端配置文件中开启熔断器</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#开启熔断机制</span></span><br><span class="line"><span class="attr">feign.hystrix.enabled</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure></li>
<li><p>在创建interface之后，还需要创建interface的实现类，在实现类中实现方法，出错了输出内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VodFileDegradeFeignClient</span> <span class="keyword">implements</span> <span class="title class_">VodClient</span> &#123;</span><br><span class="line">    <span class="comment">//远程调用出错会执行</span></span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//删除一个视频</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">removeAlyVideo</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;删除视频出错&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span><span class="comment">//批量删除视频</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">deleteBatch</span><span class="params">(List&lt;String&gt; videoList)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;删除多个视频出错&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在接口上添加注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = &quot;service-vod&quot;,fallback = 实现类.class)</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="Redis"><a href="#Redis" class="headerlink" title="- Redis"></a>- Redis</h5><p>特点：</p>
<ul>
<li>基于Key-value进行存储的</li>
<li>支持多种数据结构：string(字符串)，list(列表)，hash(哈希)，set(集合)，zset(有序集合)</li>
<li>支持持久化，通过内存存储，也可以存到硬盘里</li>
<li>支持过期时间，支持事务,消息订阅</li>
<li>读取速度110000次/s,写的速度是81000次/s</li>
<li>所有操作都是原子性的,同时支持对几个操作全并后的原子性执行</li>
</ul>
<p>场景:</p>
<ul>
<li>经常查询,不经常修改,不是特别重要的数据放到redis中缓存</li>
</ul>
<p><code>Springboot整合redis</code>:</p>
<ol>
<li><p>引入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--redis--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--spring2.x集成redis所需的common-pool2--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>创建配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.servicebase;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.CacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.CachingConfigurerSupport;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.RedisSerializationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> <span class="keyword">extends</span> <span class="title class_">CachingConfigurerSupport</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory factory)</span> &#123;</span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        RedisSerializer&lt;String&gt; redisSerializer = <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">        <span class="type">Jackson2JsonRedisSerializer</span> <span class="variable">jackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>(Object.class);</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">om</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        template.setConnectionFactory(factory);</span><br><span class="line">        <span class="comment">//key序列化方式</span></span><br><span class="line">        template.setKeySerializer(redisSerializer);</span><br><span class="line">        <span class="comment">//value序列化</span></span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">//value hashmap序列化</span></span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CacheManager <span class="title function_">cacheManager</span><span class="params">(RedisConnectionFactory factory)</span> &#123;</span><br><span class="line">        RedisSerializer&lt;String&gt; redisSerializer = <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line">        <span class="type">Jackson2JsonRedisSerializer</span> <span class="variable">jackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>(Object.class);</span><br><span class="line">        <span class="comment">//解决查询缓存转换异常的问题</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">om</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(om);</span><br><span class="line">        <span class="comment">// 配置序列化（解决乱码的问题）,过期时间600秒</span></span><br><span class="line">        <span class="type">RedisCacheConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> RedisCacheConfiguration.defaultCacheConfig()</span><br><span class="line">                .entryTtl(Duration.ofSeconds(<span class="number">600</span>))</span><br><span class="line">                .serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))</span><br><span class="line">                .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))</span><br><span class="line">                .disableCachingNullValues();</span><br><span class="line">        <span class="type">RedisCacheManager</span> <span class="variable">cacheManager</span> <span class="operator">=</span> RedisCacheManager.builder(factory)</span><br><span class="line">                .cacheDefaults(config)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>开启缓存注解: </p>
<p>(1)<code>@Cacheable</code>:</p>
<p>根据方法对其返回结果进行缓存,下次请求时,如果缓存存在,则直接读取缓存返回数据,若缓存不存在,则执行方法,并把结果存入缓存中,一般用在<code>查询方法</code>上</p>
<table>
<thead>
<tr>
<th>属性/方法名</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>缓存名,必填,它指定了你的缓存存放在哪块命名空间</td>
</tr>
<tr>
<td>cacheNames</td>
<td>与value差不多,二选一即可</td>
</tr>
<tr>
<td>key</td>
<td>可选属性,可以使用SpEL标签自定义缓存的key</td>
</tr>
</tbody></table>
<p>(2)缓存@CachePut</p>
<p>使用该注解标志的方法，每次都会执行，并将结果存入指定的缓存中。其他方法可以直接从响应的缓存中读取缓存数据，而不需要再去查询数据库。一般用在<code>新增方法</code>上。</p>
<p>查看源码，属性值如下：</p>
<table>
<thead>
<tr>
<th>属性/方法名</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>缓存名,必填,它指定了你的缓存存放在哪块命名空间</td>
</tr>
<tr>
<td>cacheNames</td>
<td>与value差不多,二选一即可</td>
</tr>
<tr>
<td>key</td>
<td>可选属性,可以使用SpEL标签自定义缓存的key</td>
</tr>
</tbody></table>
<p>(3)缓存@CacheEvict</p>
<p>使用该注解标志的方法，会清空指定的缓存。一般用在<code>更新或者删除</code>方法上</p>
<p>查看源码，属性值如下：</p>
<table>
<thead>
<tr>
<th>属性/方法名</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>缓存名,必填,它指定了你的缓存存放在哪块命名空间</td>
</tr>
<tr>
<td>cacheNames</td>
<td>与value差不多,二选一即可</td>
</tr>
<tr>
<td>key</td>
<td>可选属性,可以使用SpEL标签自定义缓存的key</td>
</tr>
<tr>
<td>allEntries</td>
<td>是否清空所有缓存,默认为false.如果指定为true,则方法调用后将立即清空所有缓存</td>
</tr>
<tr>
<td>beforeInvocation</td>
<td>是否在方法执行前就清空，默认为 false。如果指定为 true，则在方法执行前就会清空缓存</td>
</tr>
</tbody></table>
</li>
</ol>
<h5 id="杂记"><a href="#杂记" class="headerlink" title="- 杂记"></a>- 杂记</h5><h6 id="mysql"><a href="#mysql" class="headerlink" title="- mysql"></a>- mysql</h6><p>* 内连接：</p>
<p>* 左外连接：</p>
<p>* 右外连接：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取路由中id值</span></span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span>)&#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">courseId</span>=<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">params</span>.<span class="property">id</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=utf8</span></span><br><span class="line"><span class="comment"># date: Tue Oct 21 16:49:27 CST 2014</span></span><br><span class="line"><span class="comment"># author: tanb</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os, json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> oss.oss.oss_api <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> oss.oss.oss_xml_handler <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">__host = <span class="string">&#x27;&#x27;</span></span><br><span class="line">__access_key = <span class="string">&#x27;&#x27;</span></span><br><span class="line">__secret_key = <span class="string">&#x27;&#x27;</span></span><br><span class="line">__bucket = <span class="string">&#x27;&#x27;</span></span><br><span class="line">__upload_file_name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">__obj_dir = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">upload</span>(<span class="params">oss</span>):</span><br><span class="line">    <span class="comment"># upload file</span></span><br><span class="line">    obj = __obj_dir + __upload_file_name</span><br><span class="line">    res = oss.put_object_from_file(__bucket, obj, __upload_file_name, <span class="string">&#x27;text/HTML&#x27;</span>, headers = &#123;&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> res.status == <span class="number">200</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Upload OK&#x27;</span></span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;object name: %s&#x27;</span> % obj)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Upload fail&#x27;</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;http return code: %d&#x27;</span> % res.status</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;request-id: %s&#x27;</span> % res.getheader(<span class="string">&#x27;x-oss-request-id&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;reason: %s&#x27;</span> % res.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">2</span>:</span><br><span class="line">        __upload_file_name = sys.argv[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> os.path.isfile(__upload_file_name) == <span class="literal">False</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;请确认上传的数据文件存在，并且它不是文件夹。&#x27;</span>)</span><br><span class="line">            sys.exit(-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Please input the file name which you want to upload!&#x27;</span></span><br><span class="line"></span><br><span class="line">    json_data = <span class="built_in">open</span>(<span class="string">&#x27;cfg.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cfg = json.load(json_data)</span><br><span class="line">        <span class="keyword">if</span> cfg[<span class="string">&#x27;id&#x27;</span>] == <span class="string">&#x27;&#x27;</span> <span class="keyword">or</span> cfg[<span class="string">&#x27;secret&#x27;</span>] == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;请配置你的 access_key 和 secret_key，这些信息你可以从公开课的网页上获取。&#x27;</span>)</span><br><span class="line">            sys.exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;cfg.json 文件有误，不符合 JSON 的语法要求，请仔细检查&#x27;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    json_data.close()</span><br><span class="line"></span><br><span class="line">    __access_key = cfg[<span class="string">&#x27;id&#x27;</span>]</span><br><span class="line">    __secret_key = cfg[<span class="string">&#x27;secret&#x27;</span>]</span><br><span class="line">    __host = cfg[<span class="string">&#x27;endpoint&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> cfg[<span class="string">&#x27;bucket&#x27;</span>] == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;请先创建 bucket：python oss_api_tutorial.py create_bucket&#x27;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    __bucket = cfg[<span class="string">&#x27;bucket&#x27;</span>]</span><br><span class="line">    __obj_dir = cfg[<span class="string">&#x27;obj_dir&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    oss = OssAPI(__host, __access_key, __secret_key)</span><br><span class="line">    oss.set_debug(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    upload(oss)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.aliyun.oss.ClientConfiguration;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.ClientException    ;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.ServerException    ;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClient          ;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSErrorCode       ;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSException       ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.compress.utils.IOUtils;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// init OSS client</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> OSSClient <span class="title function_">initOSSClient</span><span class="params">(String accessKey, String accessKeySecret)</span> &#123;</span><br><span class="line">    <span class="type">OSSClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClient</span>(accessKey, accessKeySecret);</span><br><span class="line">    <span class="keyword">return</span> client;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// create bucket</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createBucket</span><span class="params">(OSSClient client, String bucketName)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> client.createBucket(bucketName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// upload @filePath to @bucketName using @key as the object ID</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">putObject</span><span class="params">(OSSClient client, String bucketName, String key, String filePath)</span> &#123;</span><br><span class="line">    <span class="comment">// new input stream</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(filePath);</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">content</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// create metadata of the object</span></span><br><span class="line">    <span class="type">ObjectMetadata</span> <span class="variable">meta</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMetaData</span>();</span><br><span class="line">    meta.setContentLength(file.length()); <span class="comment">// we MUST set the content length</span></span><br><span class="line"></span><br><span class="line">    <span class="type">PutObjectResult</span> <span class="variable">res</span> <span class="operator">=</span> client.putObject(bucketName, key, content, meta);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// print etag of the file on OSS</span></span><br><span class="line">    System.out.println(result.getEtag());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// list all the object on @bucketName</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listObject</span><span class="params">(OSSClient client, String bucketName)</span> &#123;</span><br><span class="line">    <span class="type">ObjectListing</span> <span class="variable">listing</span> <span class="operator">=</span> client.listObject(bucketName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (OSSObjectSummary os:listing.getObjectSummaries())</span><br><span class="line">        System.out.println(os.getKey());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// get object</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getObject</span><span class="params">(OSSClient client, String bucketName, String key)</span> &#123;</span><br><span class="line">    <span class="comment">// get object</span></span><br><span class="line">    <span class="type">OSSObject</span> <span class="variable">obj</span> <span class="operator">=</span> client.getObject(bucketName, key);</span><br><span class="line"></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">content</span> <span class="operator">=</span> obj.getObjectContent();</span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;/tmp/obj&quot;</span>);</span><br><span class="line"></span><br><span class="line">    IOUtils.copy(content, output);</span><br><span class="line">    content.close();</span><br><span class="line">    out.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OssServiceApplication</span> <span class="keyword">extends</span> <span class="title class_">SpringBootServletInitializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> SpringApplicationBuilder <span class="title function_">configure</span><span class="params">(SpringApplicationBuilder builder)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> builder.sources(OssServiceApplication.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(OssServiceApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="Springboot面试"><a href="#Springboot面试" class="headerlink" title="- Springboot面试"></a>- Springboot面试</h4><hr>
<p><strong>6.1、SpringBoot是什么(了解)</strong><br>是Spring的子项目,主要简化 Spring开发难度,去掉了繁重配置,提供各种启动器,可以让程序员很快上手,节省开发时间。</p>
<p><strong>6.2、SpringBoot的优点(必会)</strong><br>SpringBoot对上述 Spring的缺点进行的改善和优化，基于约定优于配置的思想，可以让开发人员不必在配置与逻辑业务之间进行思维的切换，全身心的投入到逻辑业务的代码编写中，从而大大提高了开发的效率，一定程度上缩短了项目周期。<br><strong>版本锁定：</strong>解决是maven 依赖版本容易冲突的问题，集合了常用的并且测试过的所有版本<br>使用了Starter（启动器）管理依赖并能对版本进行集中控制,如下的父工程带有版本号, 就是对版本进行了集中控制；</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT82eZSn9fWNfeGD6g4WZ1RDeibiaX9srmB1ibIHuNMiaXQTcicR3bNUEmw5nQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>起步依赖：</strong>解决了完成某一个功能要整合的jar 包过多的问题，集合了常用的jar 包；</p>
<p><strong>自动配置：</strong>解决了整合框架或者技术的配置文件过多，集合了所有的约定的默认配置；</p>
<p><strong>内置Tomcat：</strong>通过内置的tomcat，无需再用其他外置的Tomcat 就直接可以运行javaEE程序。</p>
<p><strong>总之：</strong>人们把 Spring Boot 称为搭建程序的脚手架。其最主要作用就是帮我们快速的构建 庞大的spring项目，并且尽可能的减少一切 xml配置，做到开箱即用，迅速上手，让我们 关注与业务而非配置。</p>
<p><strong>6.3、运行SpringBoot项目的方式(必会)</strong></p>
<p>可以打包；</p>
<p>可以使用 Maven插件直接运行；</p>
<p>直接运行 main方法。</p>
<p><strong>6.4、SpringBoot的启动器starter(必会)</strong><br><strong>(1)什么是starter?</strong><br>starter启动器,可以通过启动器集成其他的技术,比如说: web, mybatis, redis等等。可以提供对应技术的开发和运行环境，比如: pom中引入spring-boot-starter-web, 就可以进行web开发。</p>
<p>**<br>**</p>
<p><strong>(2)starter执行原理?</strong><br>SpringBoot在启动时候会去扫描 jar 包中的一个名为spring.factories；<br>根据文件中的配置,去加载自动配置类. 配置文件格式是 key=value, value 中配置了很 多需要Spring加载的类；<br>Spring 会去加载这些自动配置类, Spring 读取后,就会创建这些类的对象,放到 Spring 容器中.后期就会从 Spring容器中获取这些类对象。</p>
<p>**<br>**</p>
<p><strong>(3)SpringBoot 中常用的启动器</strong><br>spring-boot-starter-web, 提供 web技术支持<br>spring-boot-starter-test<br>spring-boot-starter-jdbc<br>spring-boot-starter-jpa<br>spring-boot-starter-redis…等等</p>
<p><strong>6.5、SpringBoot运行原理剖析(必会)</strong><br><strong>(一) SpringApplication类作用及run()方法作用</strong><br>SpringApplication 这个类整合了其他框架的启动类, 只要运行这一个类,所有的整合 就都完成了；<br>调用run函数,将当前启动类的字节码传入(主要目的是传入@SpringBootApplication这个注解), 以及 main 函数的args参数；<br>通过获取当前启动类的核心信息, 创建 IOC容器。<br><strong>(二) 当前启动类@SpringBootApplication详细剖析</strong><br>run 函数传入的当前启动类字节码, 最重要的是传入了@SpringBootApplication, 点开该注解源码, 会发现有多个注解组成,接下来会详细解释每个注解的含义. 点开这个注解源码, 发现有4类注解。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8Rq6jPwuH5Qyl9Bp4eEI3FVX2ticIa0SQUucxjJlNyicnmaaECVEJTlOg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>(1) 第一类: JDK原生注解4个</strong></p>
<p>@Target(ElementType.TYPE) //当前注解的使用范围 @Retention(RetentionPolicy.RUNTIME) //生命周期</p>
<p>@Documented //声明在生成 doc文档时是否带着注解</p>
<p>@Inherited //声明是否子类会显示父类的注解</p>
<p><strong>(2)第二类: @SpringBootConfiguration</strong></p>
<p>点开该注解源码, 会发现本质是@Configuration,定义该类是个配置类功能等同于xml 配置文件。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT84ibheDpIlTLqdRazecqpWd68l6U8K4Y3qyLPwibFZ56hBYM1HUU2o2Fw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>提到@Configuration就要提到他的搭档@Bean, 使用这两个注解就可以创建一个简 单的 Spring配置类, 可以用来替代相应的xml配置文件.可以理解为创建了 IOC容器了。</p>
<p><strong>(3)第三类: @ComponentScan, 包扫描功能</strong></p>
<p>这个注解对应 Spring 的XML 配置中的@ComponentScan，其实就是自动扫描并加 载符合条件的组件(比如@Component 和@Repository 等)或者 bean 定义, 最终将这些 bean 定义加载到IoC容器中。</p>
<p>也可以通过basePackages 等属性来细粒度的定制@ComponentScan 自动扫描的范围, 如果不指定, 则默认扫描@ComponentScan所在类的 package 及子包进行扫描。</p>
<p>**注：所以SpringBoot的启动类最好是放在root package 下，因为默认不指定 basePackages, 这样能扫描root package 及子包下的所有类。</p>
<p>**</p>
<p><strong>(4)第四类: @EnableAutoConfiguration</strong></p>
<p>点开源码会发现,本质是@import, 自动导入功能</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8ddOomJHqVJ0NE9SfbUp2QPlvibZLJbbKRvSUL55FkX1kbROVtJruBGQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<ol>
<li><p>@EnableAutoConfiguration 也是借助@Import 的帮助，将所有符合自动配置条件的 bean定义加载到 IoC容器. @EnableAutoConfiguration会根据类路径中的 jar 依赖为项目进行自动配置, 如：添加了 spring-boot-starter-web 依赖, 会自动添加 Tomcat 和 SpringMVC 的依赖, SpringBoot 会对 Tomcat和 SpringMVC进行自动配置；</p>
</li>
<li><p>那么SpringBoot是如何完成自动配置的呢?</p>
</li>
</ol>
<p>A. SpringBoot 自动配置的注解是 @EnableAutoConfiguration；</p>
<p>B. 我们用的时候是在启动类上加@SpringBootApplication,这个注解是复合注解,内部包含 @EnableAutoConfiguration；</p>
<p>C. @EnableAutoConfiguration内部有一个@Import, 这个注解才是完成自动配置的关键；</p>
<p>D. @Import 导入一个类(AutoConfigurationImportSelector),这个类内部提供了一个方法(selectImports). 这个方法会扫描导入的所有 jar 包下的spring.factories文件. 解析文件中自动配置类key=value, 将列表中的类创建,并放到Spring容器中。</p>
<p><strong>6.5.1、总结</strong><br>总之一个@SpringBootApplication注解就搞定了所有事, 它封装了核心的 @SpringBootConfiguration+@EnableAutoConfiguration+@ComponentScan 这三 个类,大大节省了程序员配置时间,这就是SpringBoot 的核心设计思想。</p>
<p><strong>6.6、SpringBoot热部署(了解)</strong><br>导入 spring-boot-devtools这个 jar 包: 就可以完成热部署了。</p>
<p><strong>6.7、SpringBoot中的配置文件(必会)</strong><br><strong>(1)有哪些配置文件?</strong><br>application.yml 或application.properties<br>bootstrap.yml 或bootstrap.properties</p>
<p><strong>(2)上面两种配置文件有什么区别?</strong><br>\1. bootstrap 由父 ApplicationContext 加载, 比 application 配置文件优先被加<br>载；<br>\2. bootstarp里的属性不能被覆盖；<br>\3. application: springboot 项目中的自动化配置；<br>\4. bootstrap:</p>
<p>使用 spring cloud config 配置中心时, 需要加载连接配置中心的配置属性的, 就 可以使用 bootstrap来完成；</p>
<p>加载不能被覆盖的属性；</p>
<p>加载一些加密/解密的数据。</p>
<p><strong>(3)读取配置文件的方式?</strong><br><strong>读取默认配置文件</strong><br>需要注入 Environment 类, 使用 environment.getProperty(peorperties 中的 key), 这 样就能获得key 对应的value值；<br>@value(${key.value}) 直接读取。<br><strong>读取自定义配置文件</strong><br>自定义配置文件后缀必须是.propeties；<br>编写和自定义配置文件对应的java类, 类上放 3个注解：<br>@ConfigurationProperties(“前缀”)<br>@PropertySource(“指定配置文件”)<br>@Component 包扫描<br>读取的时候就跟读取默认配置文件一样。</p>
<p><strong>6.8、SpringBoot支持哪些日志框架(了解)</strong><br>Java Utils logging<br>Log4j2<br>Lockback<br>如果你使用了启动器,那么 springboo 默认将 Lockback作为日志框架。</p>
<p><strong>6.9、SpringBoot常用注解(必会)</strong><br>\1. @SpringBootApplication: 它 封 装 了 核 心 的 @SpringBootConfiguration +@EnableAutoConfiguration +@ComponentScan 这三个类,大大节省了程序员配置时间,这就是 SpringBoot的核心设计思想；</p>
<p>2.@EnableScheduling是通过@Import将Spring调度框架相关的bean定义都加载到IOC容器；</p>
<p>\3. @MapperScan:spring-boot支持mybatis组件的一个注解，通过此注解指定mybatis接口类的路径，即可完成对mybatis 接口的扫描；</p>
<p>4.@RestController 是@Controller 和 @ResponseBody 的 结 合 , 一 个 类 被 加 上 @RestController注解,数据接口中就不再需要添加@ResponseBody,更加简洁；</p>
<p>5.@RequestMapping,我们都需要明确请求的路径；</p>
<p>6.@GetMappping,@PostMapping, @PutMapping, @DeleteMapping 结合 @RequestMapping使用, 是 Rest 风格的, 指定更明确的子路径；</p>
<p>7.@PathVariable：路径变量注解，用{}来定义url 部分的变量名；</p>
<p>8.@Service 这个注解用来标记业务层的组件，我们会将业务逻辑处理的类都会加上这个注解交给spring 容器。事务的切面也会配置在这一层。当让 这个注解不是一定要用。有个泛指组件的注解，当我们不能确定具体作用的时候 可以用泛指组件的注解托付给 spring容器；</p>
<p>9.@Component 和spring的注解功能一样, 注入到IOC 容器中；</p>
<p>10.@ControllerAdvice 和 @ExceptionHandler 配合完成统一异常拦截处理. 备注: 面试的时候记住6.7 个即可~</p>
<p><strong>7、SpringCloud</strong><br>7.1、SOA和微服务的区别?(必会)**<br>谈到 SOA和微服务的区别, 那咱们先谈谈架构的演变。</p>
<p><strong>1. 集中式架构</strong></p>
<p>项目功能简单, 一个项目只需一个应用, 将所有功能部署在一起, 这样的架构好处是减 少了部署节点和成本。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8WuZo4YUvwWh8fBgFmWSdEv9tPGibTG48r6e4ibBeF8vtTCicxgQmQ8ibKg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>缺点:</strong> 代码耦合，开发维护困难, 无法水平扩展, 单点容错率低，并发能力差。</p>
<p><strong>2. 垂直拆分架构</strong></p>
<p>当访问量逐渐增大，单一应用无法满足需求，此时为了应对更高的并发和业务需求，我们根据业务功能对系统进行拆分：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8y1xvq63ibVl4Z0kiarlzjGO3WjcLmaAuB5PRcfRynPeuI36g5q5bQUaw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>优点：</strong>系统拆分实现了流量分担，解决了并发问题；可以针对不同模块进行优化, 方便水平扩展，负载均衡，容错率提高。</p>
<p>缺点：系统间相互独立，会有很多重复开发工作，影响开发效率。</p>
<p><strong>3. 分布式服务</strong></p>
<p>当垂直应用越来越多, 随着项目业务功能越来越复杂, 并非垂直应用这一条线进行数据调用, 应用和应用之间也会互相调用, 也就是完成某一个功能,需要多个应用互相调用, 这就 是将功能拆完来完成的分布式架构。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8pzn5WgPKnOj9k8VRwkCkr49bH2xYQicbn0YlbUEIy6tJNSUXvKzFPOA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>优点:</strong> 将基础服务进行了抽取，系统间相互调用，提高了代码复用和开发效率。</p>
<p><strong>缺点:</strong> 系统间耦合度变高，调用关系错综复杂，难以维护。</p>
<p><strong>4. 服务治理架构SOA</strong></p>
<p>SOA ：面向服务的架构</p>
<p>当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。此时，用于提高机器利用率的资源调度和治理中心(SOA)是关键, 而最初的服务治理基石是 Dubbo 服务治理。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8XxPcROb1r97C3gjG9tiaklXs2RcAHNeueRp7jvW4IqouXCcqLUvuyTg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>以前分布式服务的问题？</strong><br>服务越来越多，需要管理每个服务的地址, 调用关系错综复杂，难以理清依赖关系；</p>
<p>服务过多，服务状态难以管理，无法根据服务情况动态管理。</p>
<p><strong>SOA服务治理架构的优点:</strong><br>服务注册中心，实现服务自动注册和发现，无需人为记录服务地址；<br>服务自动订阅，服务列表自动推送，服务调用透明化，无需关心依赖关系；<br>动态监控服务状态监控报告，人为控制服务状态。</p>
<p><strong>SOA服务治理架构的缺点：</strong><br>服务间依然会有依赖关系，一旦某个环节出错会影响较大(容错机制)；</p>
<p>服务关系复杂，运维、测试部署困难，不符合开发-运维一站式维护的思想。</p>
<p><strong>5. 微服务</strong></p>
<p>前面说的 SOA，英文翻译过来是面向服务。微服务，似乎也是服务，都是对系统进行拆分。因此两者非常容易混淆，但其实缺有一些差别：<br><strong>微服务的特点：</strong><br><strong>单一职责：</strong>微服务中每一个服务都对应唯一的业务能力，做到单一职责；</p>
<p><strong>微：</strong>微服务的服务拆分粒度很小，例如一个用户管理就可以作为一个服务。每个服务虽小，但“五脏俱全”。</p>
<p><strong>面向服务：</strong>面向服务是说每个服务都要对外暴露Rest风格服务接口 API。并不关心 服务的技术实现，做到与平台和语言无关，也不限定用什么技术实现，只要提供 Rest的接口即可；</p>
<p><strong>自治：</strong>自治是说服务间互相独立，互不干扰。</p>
<p>团队独立：每个服务都是一个独立的开发团队，人数不能过多。</p>
<p>技术独立：因为是面向服务，提供Rest接口，使用什么技术没有别人干涉。</p>
<p>前后端分离：采用前后端分离开发，提供统一Rest接口，后端不用再为PC、 移动段开发不同接口。</p>
<p>数据库分离：每个服务都使用自己的数据源。</p>
<p>部署独立：服务间虽然有调用，但要做到服务重启不影响其它服务。有利于持 续集成和持续交付。每个服务都是独立的组件，可复用，可替换，降低耦合， 易维护. 基于 docker容器是开发。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8S9zCP6LUjAAGHQuofILzCVL16Hfdam1uoyx7lwe37kFFRhcVuLlefw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>目前微服务微服务架构主流的是 SpringBoot+Dubbo 和 SpringBoot+SpringCloud的架构模式。<br>综上, 无论是 SOA 还是微服务, 都需要进行服务调度, 目前主流的服务调度室 RPC 和 HTTP两种协议, 而 Dubbo 基于 RPC 的远程调度机构, SpringCloud 是基于 Rest 风格(基于http协议实现的)的 Spring 全家桶微服务服务治理框架。说到这里也可以继续说下 Dubbo和SpringCloud的区别。</p>
<p><strong>7.2、SpringCloud是什么?(了解)</strong><br>SpringCloud是一系列框架的集合，集成SpringBoot，提供很多优秀服务：服务发现 和注册，统一配置中心, 负载均衡，网关, 熔断器等的一个微服务治理框架。</p>
<p><strong>7.3、SpringCloud的优势?(了解)</strong><br>因为 SpringCloud源于 Spring，所以它的质量，稳定性，持续性都是可以保证的；<br>SpringCloud天热支持 SpringBoot 框架，就可以提高开发效率，能够实现需求；<br>SpringCloud更新很快，后期支持很给力；<br>SpringCloud可以用来开发微服务。</p>
<p><strong>7.4、SpringCloud有哪些核心组件?(必会)</strong><br>1.Eureka: 注册中心, 服务注册和发现；<br>2.Ribbon: 负载均衡, 实现服务调用的负载均衡；<br>3.Hystrix: 熔断器；<br>4.Feign: 远程调用；<br>5.Gateway: 网关；<br>6.Spring Cloud Config: 配置中心；</p>
<p>(1)Eureka</p>
<p>提供服务注册和发现, 是注册中心。有两个组件: Eureka 服务端和 Eureka 客户端。<br>7.Eureka 服务端: 作为服务的注册中心, 用来提供服务注册, 支持集群部署；<br>8.Eureka 客户端: 是一个 java 客户端, 将服务注册到服务端, 同事将服务端的信息缓存 到本地, 客户端和服务端定时交互。</p>
<p>\1. 原理</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8yOzOicgW72HAHSibtUo9HamibPZrjvL6XibesxhkcJ3icBUuzgWQCk7tfgQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>Eureka-Server：</strong>就是服务注册中心（可以是一个集群），对外暴露自己的地址；</p>
<p><strong>提供者：</strong>启动后向 Eureka 注册自己信息（地址，服务名称等），并且定期进行服务续约；</p>
<p><strong>消费者：</strong>服务调用方，会定期去Eureka 拉取服务列表，然后使用负载均衡算法选出一 个服务进行调用；</p>
<p><strong>心跳(续约)：</strong>提供者定期通过 http方式向Eureka 刷新自己的状态。</p>
<p><strong>2. 服务下线、失效剔除和自我保护</strong></p>
<p>服务的注册和发现都是可控制的，可以关闭也可以开启。默认都是开启；</p>
<p>注册后需要心跳，心跳周期默认 30秒一次，超过 90秒没发心跳认为宕机；</p>
<p>服务拉取默认 30秒拉取一次；</p>
<p>Eureka 每个60 秒会剔除标记为宕机的服务；</p>
<p>Eureka 会有自我保护，当心跳失败比例超过阈值(默认 85%)，那么开启自我保护，不再剔除服务；</p>
<p>Eureka 高可用就是多台Eureka互相注册在对方上。</p>
<p><strong>(2)Ribbon</strong><br>Ribbon 是 Netflix 发布的云中服务开源项目. 给客户端提供负载均衡, 也就是说 Ribbon是作用在消费者方的；<br>简单来说, 它是一个客户端负载均衡器, 它会自动通过某种算法去分配你要连接的机器；<br>SpringCloud认为 Ribbon这种功能很好, 就对它进行了封装, 从而完成负载均衡；<br>Ribbon默认负责均衡策略是轮询策略。</p>
<p><strong>(3)Hystrix熔断器</strong><br>有时候可能是网络问题, 一些其它问题, 导致代码无法正常运行, 这是服务就挂了, 崩溃了。熔断器就是为了解决无法正常访问服务的时, 提供的一种解决方案；<br>解决因为一个服务崩溃而引起的一系列问题, 使问题只局限于这个服务中,不会影响其他服务；<br>Hystrix 提供了两种功能, 一种是服务降级, 一种是服务熔断。</p>
<p><strong>1. 服务降级原理</strong><br>Hystrix 为每个服务分配了小的线程池, 当用户发请求过来, 会通过线程池创建线 程来执行任务, 当创建的线程池已满或者请求超时(这里和多线程线程池不一样,不 存在任务队列), 则启动服务降级功能；<br>降级指的请求故障时, 不会阻塞, 会返回一个友好提示(可以自定义, 例如网站维 护中请稍后重试), 也就是说不会影响其他服务的运行。</p>
<p><strong>2. 服务熔断原理</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/ogaiaiazFxE7LdG0LGzRdSYgojIGGNFcT8Ip6QkFQvUe0ibF1qhVHLFCZqldAS5n9vqhrwv9MO6rAOiaLsu9sKIDYA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>状态机有 3个状态：<br><strong>Closed：</strong>关闭状态（断路器关闭），所有请求都正常访问；</p>
<p><strong>Open：</strong>打开状态（断路器打开），所有请求都会被降级。Hystix 会对请求情况计数， 当一定时间内失败请求百分比达到阈值，则触发熔断，断路器会完全关闭。默认失败比例的阈值是50%，请求次数最少不低于 20次；</p>
<p><strong>HalfOpen：</strong>半开状态，open状态不是永久的，打开后会进入休眠时间（默认是5S）。随后断路器会自动进入半开状态。此时会释放 1次请求通过，若这个请求是健康的， 则会关闭断路器，否则继续保持打开，再次进行5秒休眠计时。</p>
<p><strong>(4)Feign: 远程调用组件</strong><br>后台系统中, 微服务和微服务之间的调用可以通过 Feign组件来完成；</p>
<p>Feign组件集成了Ribbon 负载均衡策略(默认开启的, 使用轮询机制), Hystrix 熔断器 (默认关闭的, 需要通过配置文件进行设置开启)；</p>
<p>被调用的微服务需要提供一个接口, 加上@@FeignClient(“url”)注解；</p>
<p>调用方需要在启动类上加上@EnableFeignClients, 开启 Feign组件功能。</p>
<p><strong>(5)Gateway: 路由/网关</strong><br>1.对于项目后台的微服务系统, 每一个微服务都不会直接暴露给用户来调用的, 但是如果用户知道了某一个服务的ip:端口号:url:访问参数, 就能直接访问你. 如果再是恶意访问, 恶意攻击, 就会击垮后台微服务系统.因此, 需要一个看大门的大boss, 来保护我们的后台系统；<br>2.Gateway 支持过滤器功能，对请求或响应进行拦截，完成一些通用操作。<br>Gateway 提供两种过滤器方式：“pre”和“post”<br>pre 过滤器，在转发之前执行，可以做参数校验、权限校验、流量监控、日志输出、 协议转换等。post 过滤器，在后端微服务响应之后并且给前端响应之前执行，可以做响应内容、 响应头的修改，日志的输出，流量监控等。<br>3.Gateway 还提供了两种类型过滤器</p>
<p>(一) GatewayFilter：局部过滤器，针对单个路由</p>
<p>\1. GatewayFilter 局部过滤器，是针对单个路由的过滤器。</p>
<p>\2. 在Spring Cloud Gateway 组件中提供了大量内置的局部过滤器，对请求和响应 做过滤操作。</p>
<p>\3. 遵循约定大于配置的思想，只需要在配置文件配置局部过滤器名称，并为其指定对 应的值，就可以让其生效。</p>
<p>(二) GlobalFilter ：全局过滤器，针对所有路由</p>
<p>\1. GlobalFilter 全局过滤器，不需要在配置文件中配置，系统初始化时加载，并作用 在每个路由上。<br>\2. Spring Cloud Gateway 核心的功能也是通过内置的全局过滤器来完成。</p>
<p>\3. 自定义全局过滤器步骤：<br>1 定义类实现 GlobalFilter 和 Ordered接口；<br>2 复写方法 3 完成逻辑处理。</p>
<p><strong>(6)Spring Cloud Config</strong><br>在分布式系统中，由于服务数量巨多，为了方便服务配置文件统一管理，实时更新，所以需要分布式配置中心组件。在 Spring Cloud 中，有分布式配置中心组件 spring CloudConfig ，它支持配置服务放在配置服务的内存中（即本地），也支持放在远程 Git仓库中.</p>
<p><strong>7.5、SpringBoot和SpringCloud的关系(必会)</strong><br>1.SpringBoot是为了解决 Spring配置文件冗余问题, 简化开发的框架；</p>
<p>2.SpringCloud是为了解决微服务之间的协调和配置问题, 还有服务之间的通信, 熔断, 负载均衡远程调度任务框架；</p>
<p>3.SpringCloud需要依赖 SpringBoot 搭建微服务, SpringBoot使用了默认大于配 置的理念，很多集成方案已经帮你选择好了，能不配置就不配置，SpringCloud 很大的一部分是基于SpringBoot 来实现；</p>
<p>4.SpringBoot不需要依赖 SpringCloud就可以独立开发. SpringBoot 也可以集成 Dubbo 进行开发。</p>
<p><strong>7.6、SpringCloud和Dubbo的区别(高薪常问)</strong><br><strong>1.SpringCloud和Dubbo 都是主流的微服务架构。</strong><br>SpringCloud是Apache下的 Spring体系下的微服务解决方案；<br>Dubbo 是阿里系统中分布式微服务治理框架。<br><strong>2.技术方面对比</strong><br>SpringCloud 功能远远超过 Dubbo, Dubbo 只实现了服务治理(注册和发现). 但是SpringCloud提供了很多功能, 有21个子项目；<br>Dubbo 可以使用 Zookeeper 作为注册中心, 实现服务的注册和发现, SpringCloud 不仅可以使用 Eureka 作为注册中心, 也可以使用 Zookeeper 作为 注册中心；<br>Dubbo 没有实现网关功能, 只能通过第三方技术去整合. 但是 SpringCloud 有 zuul路由网关, 对请求进行负载均衡和分发. 提供熔断器, 而且和git 能完美集成。<br><strong>3.性能方面对比</strong><br>由于Dubbo 底层是使用Netty 这样的 NIO 框架，是基于 TCP协议传输的，配合以Hession序列化完成 RPC；<br>而 SpringCloud 是基于 Http 协议+Rest 接口调用远程过程的，相对来说，Http 请求会有更大的报文，占的带宽也会更多；<br>使用 Dubbo 时, 需要给每个实体类实现序列化接口, 将实体类转化为二进制进行 RPC 通信调用.而使用SpringCloud时, 实体类就不需要进行序列化。</p>
<p><strong>刚才有提到注册中心不一样,那么Eureka和Zookeeper有什么区别? 我们继续往下说~</strong>**<br>**</p>
<p>**<br>**</p>
<p><strong>7.7 Eureka和Zookeeper的区别(高薪常问)</strong><br>在谈这个问题前我们先看下 CAP 原则: C(Consistency)-数据一致性; A(Availability)服务可用性; P(Partition tolerance)-服务对网络分区故障的容错性, 这三个特性在任何分 布式系统中不能同时满足, 最多同时满足两个, 而且 P(分区容错性)是一定要满足的。<br>1.Eureka 满足AP(服务可用性和容错性), Zookeeper 满足 CP(数据一致性和容错性)；<br>2.Zookeeper 满足 CP , 数据一致性, 服务的容错性. 数据在各个服务间同步完成后才返回用户结果, 而且如果服务出现网络波动导致监听不到服务心跳, 会立即从服务列表中 剔除, 服务不可用；<br>3.Eureka 满足 AP , 可用性, 容错性. 当因网络故障时, Eureka 的自我保护机制不会立即剔除服务, 虽然用户获取到的服务不一定是可用的, 但至少能够获取到服务列表. 用户 访问服务列表时还可以利用重试机制, 找到正确的服务. 更服务分布式服务的高可用需求；<br>4.Eureka 集群各节点平等, Zookeeper 集群有主从之分。</p>
<p>4.1. 如果 Zk 集群中有服务宕机,会重新进行选举机制,选择出主节点, 因此可能会导致整个集群因为选主而阻塞, 服务不可用；</p>
<p>4.2. Eureka 集群中有服务宕机,因为是平等的各个服务器,所以其他服务器不受影响.<br>5.Eureka 的服务发现者会主动拉取服务, ZK服务发现者是监听机制。</p>
<p>5.1. Eureka 中获取服务列表后会缓存起来, 每隔 30秒重新拉取服务列表；</p>
<p>5.2. Zk 则是监听节点信息变化, 当服务节点信息变化时, 客户端立即就得到通知。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://jilfoyle-9527.github.io">Jilfoyle</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jilfoyle-9527.github.io/2022/07/22/Springboot%E6%A1%86%E6%9E%B6/">https://jilfoyle-9527.github.io/2022/07/22/Springboot%E6%A1%86%E6%9E%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jilfoyle-9527.github.io" target="_blank">Jilfoyle</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%A1%86%E6%9E%B6/">框架</a><a class="post-meta__tags" href="/tags/Springboot/">Springboot</a></div><div class="post_share"><div class="social-share" data-image="/medias/linux/springboot.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/22/1-Spring-IOC%E6%A1%86%E6%9E%B6%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"><img class="prev-cover" src="/medias/linux/spring.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">1.Spring-IOC框架快速入门</div></div></a></div><div class="next-post pull-right"><a href="/2022/07/21/CentOS%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEJavaWeb%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"><img class="next-cover" src="/medias/linux/centos.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CentOS服务器配置JavaWeb开发环境</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://img2.baidu.com/it/u=343850545,2320437498&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jilfoyle</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">262</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">68</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">37</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">暑往寒来春复秋，夕阳西下水东流</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%98%B6%E6%AE%B5"><span class="toc-number">1.</span> <span class="toc-text">- 微服务阶段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringBoot%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF"><span class="toc-number">2.</span> <span class="toc-text">- SpringBoot学习路线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%E5%88%9D%E6%8E%A2"><span class="toc-number">3.</span> <span class="toc-text">- 原理初探</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E4%B8%BB%E5%90%AF%E5%8A%A8%E7%B1%BB%E6%80%8E%E4%B9%88%E8%BF%90%E8%A1%8C"><span class="toc-number">4.</span> <span class="toc-text">- 了解主启动类怎么运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yaml%E8%AF%AD%E6%B3%95"><span class="toc-number">5.</span> <span class="toc-text">- yaml语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">- 给属性赋值的几种方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSR303%E6%A0%A1%E9%AA%8C"><span class="toc-number">7.</span> <span class="toc-text">- JSR303校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E5%88%87%E6%8D%A2%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">- 多环境切换及配置文件位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringBoot-Web%E5%BC%80%E5%8F%91"><span class="toc-number">9.</span> <span class="toc-text">- SpringBoot Web开发</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Thymeleaf%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-number">9.1.</span> <span class="toc-text">- Thymeleaf模板引擎</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MVC%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-number">9.2.</span> <span class="toc-text">- MVC配置原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">9.3.</span> <span class="toc-text">- 国际化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">9.4.</span> <span class="toc-text">- 拦截器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="toc-number">9.5.</span> <span class="toc-text">- 学习目标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JDBC"><span class="toc-number">9.6.</span> <span class="toc-text">- JDBC</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Druid"><span class="toc-number">9.7.</span> <span class="toc-text">- Druid</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mybatis"><span class="toc-number">9.8.</span> <span class="toc-text">- Mybatis</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SpringSecurity%EF%BC%88%E5%AE%89%E5%85%A8%EF%BC%89"><span class="toc-number">9.9.</span> <span class="toc-text">- SpringSecurity（安全）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B4%E5%90%88Swagger"><span class="toc-number">9.10.</span> <span class="toc-text">- 整合Swagger</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%A6%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">9.11.</span> <span class="toc-text">- 带条件的分页查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB"><span class="toc-number">9.12.</span> <span class="toc-text">- 全局统一异常处理类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB"><span class="toc-number">9.13.</span> <span class="toc-text">- 自定义异常处理类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86"><span class="toc-number">9.14.</span> <span class="toc-text">- 统一日志处理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ES6%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF"><span class="toc-number">9.15.</span> <span class="toc-text">- ES6前端技术</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#OSS%E4%BA%91%E5%AD%98%E5%82%A8"><span class="toc-number">9.16.</span> <span class="toc-text">- OSS云存储</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#EasyExcel"><span class="toc-number">9.17.</span> <span class="toc-text">- EasyExcel</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/15/book/" title="书架"><img src="/medias/book/book.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="书架"/></a><div class="content"><a class="title" href="/2023/04/15/book/" title="书架">书架</a><time datetime="2023-04-15T13:03:19.424Z" title="发表于 2023-04-15 21:03:19">2023-04-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/12/Springboot(%E5%90%88%E9%9B%86)/" title="SpringBoot(合集)"><img src="/medias/springboot/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot(合集)"/></a><div class="content"><a class="title" href="/2023/04/12/Springboot(%E5%90%88%E9%9B%86)/" title="SpringBoot(合集)">SpringBoot(合集)</a><time datetime="2023-04-12T07:53:42.161Z" title="发表于 2023-04-12 15:53:42">2023-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/12/Springboot-security(%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6)/" title="Springboot-security(权限控制)"><img src="/medias/springboot/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Springboot-security(权限控制)"/></a><div class="content"><a class="title" href="/2023/04/12/Springboot-security(%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6)/" title="Springboot-security(权限控制)">Springboot-security(权限控制)</a><time datetime="2023-04-12T07:51:10.801Z" title="发表于 2023-04-12 15:51:10">2023-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/12/SpringDataElasticsearch/" title="SpringDataElasticsearch"><img src="/medias/SpringDataElasticsearch/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringDataElasticsearch"/></a><div class="content"><a class="title" href="/2023/04/12/SpringDataElasticsearch/" title="SpringDataElasticsearch">SpringDataElasticsearch</a><time datetime="2023-04-12T07:35:07.267Z" title="发表于 2023-04-12 15:35:07">2023-04-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/04/12/9.SpringMVC%E4%B9%8BRESTful%E9%A3%8E%E6%A0%BC/" title="9.SpringMVC之RESTful风格"><img src="/medias/spring/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="9.SpringMVC之RESTful风格"/></a><div class="content"><a class="title" href="/2023/04/12/9.SpringMVC%E4%B9%8BRESTful%E9%A3%8E%E6%A0%BC/" title="9.SpringMVC之RESTful风格">9.SpringMVC之RESTful风格</a><time datetime="2023-04-12T07:24:27.000Z" title="发表于 2023-04-12 15:24:27">2023-04-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2023 By Jilfoyle</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>